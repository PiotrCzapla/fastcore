<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="The L class and helpers for it">

<title>Foundation – fastcore</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-000f0825b9c55ed21d14970d810c14a9.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="Foundation – fastcore">
<meta property="og:description" content="The L class and helpers for it">
<meta property="og:site_name" content="fastcore">
<meta name="twitter:title" content="Foundation – fastcore">
<meta name="twitter:description" content="The L class and helpers for it">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-sidebar floating nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">fastcore</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/fastai/fastcore"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://x.com/fastdotai"> <i class="bi bi-twitter" role="img" aria-label="Fast.ai Twitter">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./foundation.html">Foundation</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome to fastcore</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tour.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">A tour of fastcore</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./test.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Test</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Basic functionality</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./foundation.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Foundation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./xtras.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Utility functions</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./parallel.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Parallel</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./net.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Network functionality</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./docments.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Docments</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./meta.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Meta</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./script.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Script - CLI</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./xdg.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">XDG</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./style.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Style</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./xml.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">XML</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./py2pyi.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Create delegated pyi</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./external.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">External modules</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tools.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">LLM tools</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#foundational-functions" id="toc-foundational-functions" class="nav-link active" data-scroll-target="#foundational-functions">Foundational Functions</a>
  <ul class="collapse">
  <li><a href="#working_directory" id="toc-working_directory" class="nav-link" data-scroll-target="#working_directory">working_directory</a></li>
  <li><a href="#add_docs" id="toc-add_docs" class="nav-link" data-scroll-target="#add_docs">add_docs</a></li>
  <li><a href="#docs" id="toc-docs" class="nav-link" data-scroll-target="#docs">docs</a></li>
  <li><a href="#is_iter" id="toc-is_iter" class="nav-link" data-scroll-target="#is_iter">is_iter</a></li>
  <li><a href="#coll_repr" id="toc-coll_repr" class="nav-link" data-scroll-target="#coll_repr">coll_repr</a></li>
  <li><a href="#is_bool" id="toc-is_bool" class="nav-link" data-scroll-target="#is_bool">is_bool</a></li>
  <li><a href="#mask2idxs" id="toc-mask2idxs" class="nav-link" data-scroll-target="#mask2idxs">mask2idxs</a></li>
  <li><a href="#cycle" id="toc-cycle" class="nav-link" data-scroll-target="#cycle">cycle</a></li>
  <li><a href="#zip_cycle" id="toc-zip_cycle" class="nav-link" data-scroll-target="#zip_cycle">zip_cycle</a></li>
  <li><a href="#is_indexer" id="toc-is_indexer" class="nav-link" data-scroll-target="#is_indexer">is_indexer</a></li>
  <li><a href="#product" id="toc-product" class="nav-link" data-scroll-target="#product">product</a></li>
  <li><a href="#flatmap" id="toc-flatmap" class="nav-link" data-scroll-target="#flatmap">flatmap</a></li>
  <li><a href="#flatmap-1" id="toc-flatmap-1" class="nav-link" data-scroll-target="#flatmap-1">flatmap</a></li>
  </ul></li>
  <li><a href="#l-helpers" id="toc-l-helpers" class="nav-link" data-scroll-target="#l-helpers"><code>L</code> helpers</a>
  <ul class="collapse">
  <li><a href="#collbase" id="toc-collbase" class="nav-link" data-scroll-target="#collbase">CollBase</a></li>
  <li><a href="#l" id="toc-l" class="nav-link" data-scroll-target="#l">L</a></li>
  <li><a href="#examples-and-overview" id="toc-examples-and-overview" class="nav-link" data-scroll-target="#examples-and-overview">Examples and overview</a></li>
  <li><a href="#l-methods" id="toc-l-methods" class="nav-link" data-scroll-target="#l-methods"><code>L</code> Methods</a></li>
  <li><a href="#l.__getitem__" id="toc-l.__getitem__" class="nav-link" data-scroll-target="#l.__getitem__">L.__getitem__</a></li>
  <li><a href="#l.__setitem__" id="toc-l.__setitem__" class="nav-link" data-scroll-target="#l.__setitem__">L.__setitem__</a></li>
  <li><a href="#l.unique" id="toc-l.unique" class="nav-link" data-scroll-target="#l.unique">L.unique</a></li>
  <li><a href="#l.val2idx" id="toc-l.val2idx" class="nav-link" data-scroll-target="#l.val2idx">L.val2idx</a></li>
  <li><a href="#l.range" id="toc-l.range" class="nav-link" data-scroll-target="#l.range">L.range</a></li>
  <li><a href="#l.enumerate" id="toc-l.enumerate" class="nav-link" data-scroll-target="#l.enumerate">L.enumerate</a></li>
  <li><a href="#l.renumerate" id="toc-l.renumerate" class="nav-link" data-scroll-target="#l.renumerate">L.renumerate</a></li>
  <li><a href="#l.split" id="toc-l.split" class="nav-link" data-scroll-target="#l.split">L.split</a></li>
  <li><a href="#l.splitlines" id="toc-l.splitlines" class="nav-link" data-scroll-target="#l.splitlines">L.splitlines</a></li>
  <li><a href="#curryable" id="toc-curryable" class="nav-link" data-scroll-target="#curryable">curryable</a></li>
  <li><a href="#map" id="toc-map" class="nav-link" data-scroll-target="#map">map</a></li>
  <li><a href="#splitter" id="toc-splitter" class="nav-link" data-scroll-target="#splitter">splitter</a></li>
  <li><a href="#linesplitter" id="toc-linesplitter" class="nav-link" data-scroll-target="#linesplitter">linesplitter</a></li>
  <li><a href="#groupby" id="toc-groupby" class="nav-link" data-scroll-target="#groupby">groupby</a></li>
  <li><a href="#starmap" id="toc-starmap" class="nav-link" data-scroll-target="#starmap">starmap</a></li>
  <li><a href="#rstarmap" id="toc-rstarmap" class="nav-link" data-scroll-target="#rstarmap">rstarmap</a></li>
  <li><a href="#l.map_dict" id="toc-l.map_dict" class="nav-link" data-scroll-target="#l.map_dict">L.map_dict</a></li>
  <li><a href="#l.zip" id="toc-l.zip" class="nav-link" data-scroll-target="#l.zip">L.zip</a></li>
  <li><a href="#l.map_zip" id="toc-l.map_zip" class="nav-link" data-scroll-target="#l.map_zip">L.map_zip</a></li>
  <li><a href="#l.zipwith" id="toc-l.zipwith" class="nav-link" data-scroll-target="#l.zipwith">L.zipwith</a></li>
  <li><a href="#l.map_zipwith" id="toc-l.map_zipwith" class="nav-link" data-scroll-target="#l.map_zipwith">L.map_zipwith</a></li>
  <li><a href="#filter" id="toc-filter" class="nav-link" data-scroll-target="#filter">filter</a></li>
  <li><a href="#starfilter" id="toc-starfilter" class="nav-link" data-scroll-target="#starfilter">starfilter</a></li>
  <li><a href="#rstarfilter" id="toc-rstarfilter" class="nav-link" data-scroll-target="#rstarfilter">rstarfilter</a></li>
  <li><a href="#argwhere" id="toc-argwhere" class="nav-link" data-scroll-target="#argwhere">argwhere</a></li>
  <li><a href="#starargwhere" id="toc-starargwhere" class="nav-link" data-scroll-target="#starargwhere">starargwhere</a></li>
  <li><a href="#rstarargwhere" id="toc-rstarargwhere" class="nav-link" data-scroll-target="#rstarargwhere">rstarargwhere</a></li>
  <li><a href="#argfirst" id="toc-argfirst" class="nav-link" data-scroll-target="#argfirst">argfirst</a></li>
  <li><a href="#starargfirst" id="toc-starargfirst" class="nav-link" data-scroll-target="#starargfirst">starargfirst</a></li>
  <li><a href="#rstarargfirst" id="toc-rstarargfirst" class="nav-link" data-scroll-target="#rstarargfirst">rstarargfirst</a></li>
  <li><a href="#l.itemgot" id="toc-l.itemgot" class="nav-link" data-scroll-target="#l.itemgot">L.itemgot</a></li>
  <li><a href="#l.attrgot" id="toc-l.attrgot" class="nav-link" data-scroll-target="#l.attrgot">L.attrgot</a></li>
  <li><a href="#sorted" id="toc-sorted" class="nav-link" data-scroll-target="#sorted">sorted</a></li>
  <li><a href="#starsorted" id="toc-starsorted" class="nav-link" data-scroll-target="#starsorted">starsorted</a></li>
  <li><a href="#rstarsorted" id="toc-rstarsorted" class="nav-link" data-scroll-target="#rstarsorted">rstarsorted</a></li>
  <li><a href="#l.concat" id="toc-l.concat" class="nav-link" data-scroll-target="#l.concat">L.concat</a></li>
  <li><a href="#l.copy" id="toc-l.copy" class="nav-link" data-scroll-target="#l.copy">L.copy</a></li>
  <li><a href="#l.shuffle" id="toc-l.shuffle" class="nav-link" data-scroll-target="#l.shuffle">L.shuffle</a></li>
  <li><a href="#reduce" id="toc-reduce" class="nav-link" data-scroll-target="#reduce">reduce</a></li>
  <li><a href="#starreduce" id="toc-starreduce" class="nav-link" data-scroll-target="#starreduce">starreduce</a></li>
  <li><a href="#rstarreduce" id="toc-rstarreduce" class="nav-link" data-scroll-target="#rstarreduce">rstarreduce</a></li>
  <li><a href="#l.sum" id="toc-l.sum" class="nav-link" data-scroll-target="#l.sum">L.sum</a></li>
  <li><a href="#l.product" id="toc-l.product" class="nav-link" data-scroll-target="#l.product">L.product</a></li>
  <li><a href="#l.map_first" id="toc-l.map_first" class="nav-link" data-scroll-target="#l.map_first">L.map_first</a></li>
  <li><a href="#l.setattrs" id="toc-l.setattrs" class="nav-link" data-scroll-target="#l.setattrs">L.setattrs</a></li>
  <li><a href="#l.flatmap" id="toc-l.flatmap" class="nav-link" data-scroll-target="#l.flatmap">L.flatmap</a></li>
  <li><a href="#itertools-wrappers" id="toc-itertools-wrappers" class="nav-link" data-scroll-target="#itertools-wrappers">itertools wrappers</a></li>
  <li><a href="#l.cycle" id="toc-l.cycle" class="nav-link" data-scroll-target="#l.cycle">L.cycle</a></li>
  <li><a href="#takewhile" id="toc-takewhile" class="nav-link" data-scroll-target="#takewhile">takewhile</a></li>
  <li><a href="#dropwhile" id="toc-dropwhile" class="nav-link" data-scroll-target="#dropwhile">dropwhile</a></li>
  <li><a href="#startakewhile" id="toc-startakewhile" class="nav-link" data-scroll-target="#startakewhile">startakewhile</a></li>
  <li><a href="#rstartakewhile" id="toc-rstartakewhile" class="nav-link" data-scroll-target="#rstartakewhile">rstartakewhile</a></li>
  <li><a href="#stardropwhile" id="toc-stardropwhile" class="nav-link" data-scroll-target="#stardropwhile">stardropwhile</a></li>
  <li><a href="#rstardropwhile" id="toc-rstardropwhile" class="nav-link" data-scroll-target="#rstardropwhile">rstardropwhile</a></li>
  <li><a href="#accumulate" id="toc-accumulate" class="nav-link" data-scroll-target="#accumulate">accumulate</a></li>
  <li><a href="#l.pairwise" id="toc-l.pairwise" class="nav-link" data-scroll-target="#l.pairwise">L.pairwise</a></li>
  <li><a href="#l.batched" id="toc-l.batched" class="nav-link" data-scroll-target="#l.batched">L.batched</a></li>
  <li><a href="#l.compress" id="toc-l.compress" class="nav-link" data-scroll-target="#l.compress">L.compress</a></li>
  <li><a href="#l.permutations" id="toc-l.permutations" class="nav-link" data-scroll-target="#l.permutations">L.permutations</a></li>
  <li><a href="#l.combinations" id="toc-l.combinations" class="nav-link" data-scroll-target="#l.combinations">L.combinations</a></li>
  <li><a href="#partition" id="toc-partition" class="nav-link" data-scroll-target="#partition">partition</a></li>
  <li><a href="#starpartition" id="toc-starpartition" class="nav-link" data-scroll-target="#starpartition">starpartition</a></li>
  <li><a href="#rstarpartition" id="toc-rstarpartition" class="nav-link" data-scroll-target="#rstarpartition">rstarpartition</a></li>
  <li><a href="#l.flatten" id="toc-l.flatten" class="nav-link" data-scroll-target="#l.flatten">L.flatten</a></li>
  </ul></li>
  <li><a href="#config" id="toc-config" class="nav-link" data-scroll-target="#config">Config</a>
  <ul class="collapse">
  <li><a href="#save_config_file" id="toc-save_config_file" class="nav-link" data-scroll-target="#save_config_file">save_config_file</a></li>
  <li><a href="#read_config_file" id="toc-read_config_file" class="nav-link" data-scroll-target="#read_config_file">read_config_file</a></li>
  <li><a href="#config-1" id="toc-config-1" class="nav-link" data-scroll-target="#config-1">Config</a></li>
  <li><a href="#config.get" id="toc-config.get" class="nav-link" data-scroll-target="#config.get">Config.get</a></li>
  <li><a href="#config.find" id="toc-config.find" class="nav-link" data-scroll-target="#config.find">Config.find</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/AnswerDotAI/fastcore/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div><div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="foundation.html.md"><i class="bi bi-file-code"></i>CommonMark</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Foundation</h1>
</div>

<div>
  <div class="description">
    The <code>L</code> class and helpers for it
  </div>
</div>


<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->
<section id="foundational-functions" class="level2">
<h2 class="anchored" data-anchor-id="foundational-functions">Foundational Functions</h2>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L21" target="_blank" style="float:right; font-size:smaller">source</a></p>
<section id="working_directory" class="level3">
<h3 class="anchored" data-anchor-id="working_directory">working_directory</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> working_directory(</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    path</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Change working directory to <code>path</code> and return to previous on exit.</em></p>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L29" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="add_docs" class="level3">
<h3 class="anchored" data-anchor-id="add_docs">add_docs</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> add_docs(</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    cls, cls_doc:NoneType<span class="op">=</span><span class="va">None</span>, docs:VAR_KEYWORD</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Copy values from <a href="https://fastcore.fast.ai/foundation.html#docs"><code>docs</code></a> to <code>cls</code> docstrings, and confirm all public methods are documented</em></p>
<p><a href="https://fastcore.fast.ai/foundation.html#add_docs"><code>add_docs</code></a> allows you to add docstrings to a class and its associated methods. This function allows you to group docstrings together seperate from your code, which enables you to define one-line functions as well as organize your code more succintly. We believe this confers a number of benefits which we discuss in <a href="https://docs.fast.ai/dev/style.html">our style guide</a>.</p>
<p>Suppose you have the following undocumented class:</p>
<div id="0832c567" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> T:</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> foo(<span class="va">self</span>): <span class="cf">pass</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> bar(<span class="va">self</span>): <span class="cf">pass</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>You can add documentation to this class like so:</p>
<div id="da9d95f9" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>add_docs(T, cls_doc<span class="op">=</span><span class="st">"A docstring for the class."</span>,</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>            foo<span class="op">=</span><span class="st">"The foo method."</span>,</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>            bar<span class="op">=</span><span class="st">"The bar method."</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Now, docstrings will appear as expected:</p>
<div id="2c4a26aa" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>test_eq(T.__doc__, <span class="st">"A docstring for the class."</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>test_eq(T.foo.__doc__, <span class="st">"The foo method."</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>test_eq(T.bar.__doc__, <span class="st">"The bar method."</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><a href="https://fastcore.fast.ai/foundation.html#add_docs"><code>add_docs</code></a> also validates that all of your public methods contain a docstring. If one of your methods is not documented, it will raise an error:</p>
<div id="a9f77cf6" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> T:</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> foo(<span class="va">self</span>): <span class="cf">pass</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> bar(<span class="va">self</span>): <span class="cf">pass</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>f<span class="op">=</span><span class="kw">lambda</span>: add_docs(T, <span class="st">"A docstring for the class."</span>, foo<span class="op">=</span><span class="st">"The foo method."</span>)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>test_fail(f, contains<span class="op">=</span><span class="st">"Missing docs"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L43" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="docs" class="level3">
<h3 class="anchored" data-anchor-id="docs">docs</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> docs(</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    cls</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Decorator version of <a href="https://fastcore.fast.ai/foundation.html#add_docs"><code>add_docs</code></a>, using <code>_docs</code> dict</em></p>
<p>Instead of using <a href="https://fastcore.fast.ai/foundation.html#add_docs"><code>add_docs</code></a>, you can use the decorator <a href="https://fastcore.fast.ai/foundation.html#docs"><code>docs</code></a> as shown below. Note that the docstring for the class can be set with the argument <code>cls_doc</code>:</p>
<div id="d10f59f9" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="at">@docs</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> _T:</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> f(<span class="va">self</span>): <span class="cf">pass</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> g(cls): <span class="cf">pass</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    _docs <span class="op">=</span> <span class="bu">dict</span>(cls_doc<span class="op">=</span><span class="st">"The class docstring"</span>, </span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>                 f<span class="op">=</span><span class="st">"The docstring for method f."</span>,</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>                 g<span class="op">=</span><span class="st">"A different docstring for method g."</span>)</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>test_eq(_T.__doc__, <span class="st">"The class docstring"</span>)</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>test_eq(_T.f.__doc__, <span class="st">"The docstring for method f."</span>)</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>test_eq(_T.g.__doc__, <span class="st">"A different docstring for method g."</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>For either the <a href="https://fastcore.fast.ai/foundation.html#docs"><code>docs</code></a> decorator or the <a href="https://fastcore.fast.ai/foundation.html#add_docs"><code>add_docs</code></a> function, you can still define your docstrings in the normal way. Below we set the docstring for the class as usual, but define the method docstrings through the <code>_docs</code> attribute:</p>
<div id="e4bbd1b9" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="at">@docs</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> _T:</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">"The class docstring"</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> f(<span class="va">self</span>): <span class="cf">pass</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    _docs <span class="op">=</span> <span class="bu">dict</span>(f<span class="op">=</span><span class="st">"The docstring for method f."</span>)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>test_eq(_T.__doc__, <span class="st">"The class docstring"</span>)</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>test_eq(_T.f.__doc__, <span class="st">"The docstring for method f."</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
</section>
<section id="is_iter" class="level3">
<h3 class="anchored" data-anchor-id="is_iter">is_iter</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> is_iter(</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    o</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Test whether <code>o</code> can be used in a <code>for</code> loop</em></p>
<div id="4e191b5b" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> is_iter([<span class="dv">1</span>])</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="kw">not</span> is_iter(array(<span class="dv">1</span>))</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> is_iter(array([<span class="dv">1</span>,<span class="dv">2</span>]))</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> (o <span class="cf">for</span> o <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">3</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L49" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="coll_repr" class="level3">
<h3 class="anchored" data-anchor-id="coll_repr">coll_repr</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> coll_repr(</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    c, max_n:<span class="bu">int</span><span class="op">=</span><span class="dv">250</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>String repr of up to <code>max_n</code> items of (possibly lazy) collection <code>c</code></em></p>
<p><a href="https://fastcore.fast.ai/foundation.html#coll_repr"><code>coll_repr</code></a> is used to provide a more informative <a href="https://stackoverflow.com/questions/1984162/purpose-of-pythons-repr"><code>__repr__</code></a> about list-like objects. <a href="https://fastcore.fast.ai/foundation.html#coll_repr"><code>coll_repr</code></a> and is used by <a href="https://fastcore.fast.ai/foundation.html#l"><code>L</code></a> to build a <code>__repr__</code> that displays the length of a list in addition to a preview of a list.</p>
<div id="fe3ed954" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>test_eq(coll_repr(<span class="bu">range</span>(<span class="dv">1000</span>),<span class="dv">10</span>), <span class="st">'(#1000) [0, 1, 2, 3, 4, 5, 6, 7, 8, 9...]'</span>)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>test_eq(coll_repr(<span class="bu">range</span>(<span class="dv">1000</span>), <span class="dv">5</span>), <span class="st">'(#1000) [0, 1, 2, 3, 4...]'</span>)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>test_eq(coll_repr(<span class="bu">range</span>(<span class="dv">10</span>),   <span class="dv">5</span>), <span class="st">'(#10) [0, 1, 2, 3, 4...]'</span>)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>test_eq(coll_repr(<span class="bu">range</span>(<span class="dv">5</span>),    <span class="dv">5</span>), <span class="st">'[0, 1, 2, 3, 4]'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L58" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="is_bool" class="level3">
<h3 class="anchored" data-anchor-id="is_bool">is_bool</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> is_bool(</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    x</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Check whether <code>x</code> is a bool or None</em></p>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L63" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="mask2idxs" class="level3">
<h3 class="anchored" data-anchor-id="mask2idxs">mask2idxs</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> mask2idxs(</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    mask</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Convert bool mask or index list to index <a href="https://fastcore.fast.ai/foundation.html#l"><code>L</code></a></em></p>
<div id="3b7dd826" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>test_eq(mask2idxs([<span class="va">False</span>,<span class="va">True</span>,<span class="va">False</span>,<span class="va">True</span>]), [<span class="dv">1</span>,<span class="dv">3</span>])</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>test_eq(mask2idxs(array([<span class="va">False</span>,<span class="va">True</span>,<span class="va">False</span>,<span class="va">True</span>])), [<span class="dv">1</span>,<span class="dv">3</span>])</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>test_eq(mask2idxs(array([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>])), [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/basics.py#L682" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="cycle" class="level3">
<h3 class="anchored" data-anchor-id="cycle">cycle</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> cycle(</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    o</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Like <code>itertools.cycle</code> except creates list of <code>None</code>s if <code>o</code> is empty</em></p>
<div id="7f8805d7" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>test_eq(itertools.islice(cycle([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]),<span class="dv">5</span>), [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">2</span>])</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>test_eq(itertools.islice(cycle([]),<span class="dv">3</span>), [<span class="va">None</span>]<span class="op">*</span><span class="dv">3</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>test_eq(itertools.islice(cycle(<span class="va">None</span>),<span class="dv">3</span>), [<span class="va">None</span>]<span class="op">*</span><span class="dv">3</span>)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>test_eq(itertools.islice(cycle(<span class="dv">1</span>),<span class="dv">3</span>), [<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/basics.py#L688" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="zip_cycle" class="level3">
<h3 class="anchored" data-anchor-id="zip_cycle">zip_cycle</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> zip_cycle(</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    x, args:VAR_POSITIONAL</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Like <code>itertools.zip_longest</code> but <a href="https://fastcore.fast.ai/basics.html#cycle"><code>cycle</code></a>s through elements of all but first argument</em></p>
<div id="21c554a1" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>test_eq(zip_cycle([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>],<span class="bu">list</span>(<span class="st">'abc'</span>)), [(<span class="dv">1</span>, <span class="st">'a'</span>), (<span class="dv">2</span>, <span class="st">'b'</span>), (<span class="dv">3</span>, <span class="st">'c'</span>), (<span class="dv">4</span>, <span class="st">'a'</span>)])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L85" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="is_indexer" class="level3">
<h3 class="anchored" data-anchor-id="is_indexer">is_indexer</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> is_indexer(</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    idx</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Test whether <code>idx</code> will index a single item in a list</em></p>
<p>You can, for example index a single item in a list with an integer or a 0-dimensional numpy array:</p>
<div id="cf94cb54" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> is_indexer(<span class="dv">1</span>)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> is_indexer(np.array(<span class="dv">1</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>However, you cannot index into single item in a list with another list or a numpy array with ndim &gt; 0.</p>
<div id="1159335e" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="kw">not</span> is_indexer([<span class="dv">1</span>, <span class="dv">2</span>])</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="kw">not</span> is_indexer(np.array([[<span class="dv">1</span>, <span class="dv">2</span>], [<span class="dv">3</span>, <span class="dv">4</span>]]))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L90" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="product" class="level3">
<h3 class="anchored" data-anchor-id="product">product</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> product(</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    xs</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>The product of elements of <code>xs</code>, with <code>None</code>s removed</em></p>
<div id="73a52d33" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>product([<span class="va">None</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>60</code></pre>
</div>
</div>
<div id="fa5990de" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>product([])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>1</code></pre>
</div>
</div>
<div id="6f9ef4e6" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="bu">sum</span>([])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>0</code></pre>
</div>
</div>
</section>
<section id="flatmap" class="level3">
<h3 class="anchored" data-anchor-id="flatmap">flatmap</h3>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L95" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="flatmap-1" class="level3">
<h3 class="anchored" data-anchor-id="flatmap-1">flatmap</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> flatmap(</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    f, xs</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Apply f to each element and flatten the results into a single list.</em></p>
<p><a href="https://fastcore.fast.ai/foundation.html#flatmap"><code>flatmap</code></a> is a fundamental operation in functional programming that combines mapping and flattening into a single step. Where <code>map</code> applies a function to each element and returns a list of results, <a href="https://fastcore.fast.ai/foundation.html#flatmap"><code>flatmap</code></a> goes further: it expects the function to return a sequence for each element, then concatenates all those sequences into one flat list, which is useful for operations where each input naturally produces zero, one, or many outputs.</p>
<p><code>flatmap(f, xs)</code> is just a named abstraction for the list comprehension <code>[y for x in xs for y in f(x)]</code>. Giving it a name makes the intent clearer and the code more readable.</p>
<div id="2726f4d4" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>flatmap(<span class="bu">range</span>, <span class="bu">range</span>(<span class="dv">4</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>[0, 0, 1, 0, 1, 2]</code></pre>
</div>
</div>
<p>Compare <code>map</code> (which nests results) with <a href="https://fastcore.fast.ai/foundation.html#flatmap"><code>flatmap</code></a> (which flattens them):</p>
<div id="b36cf16d" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="bu">list</span>(<span class="bu">map</span>(<span class="bu">str</span>.split, [<span class="st">"hello world"</span>, <span class="st">"foo bar"</span>]))  <span class="co"># nested</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>[['hello', 'world'], ['foo', 'bar']]</code></pre>
</div>
</div>
<div id="f0c00126" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>flatmap(<span class="bu">str</span>.split, [<span class="st">"hello world"</span>, <span class="st">"flatmap rocks"</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>['hello', 'world', 'flatmap', 'rocks']</code></pre>
</div>
</div>
<p>Common use cases include: parsing structured text (splitting lines into words), expanding nested data (extracting all emails from a list of contacts), filtering with transformation (keeping and transforming only valid items), and traversing hierarchies (listing files across multiple directories). The pattern elegantly handles “optional” results too—return an empty list to skip an item, or a single-element list to include it. This avoids the nested lists you’d get from <code>map</code> followed by a separate <a href="https://fastcore.fast.ai/basics.html#flatten"><code>flatten</code></a>, and expresses the intent more directly. Below we show a few examples.</p>
<p>Parse CSV-like lines into all values:</p>
<div id="240579df" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>flatmap(Self.split(<span class="st">','</span>), [<span class="st">"a,b,c"</span>, <span class="st">"d,e"</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>['a', 'b', 'c', 'd', 'e']</code></pre>
</div>
</div>
<p>Return <code>[]</code> to skip an item, <code>[x]</code> to keep it, or <code>[x, y, ...]</code> to expand it:</p>
<div id="4eeb0dc7" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>flatmap(<span class="kw">lambda</span> x: [x<span class="op">*</span><span class="dv">10</span>] <span class="cf">if</span> x <span class="cf">else</span> [], [<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">2</span>])  <span class="co"># skips zeros</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>[10, 20]</code></pre>
</div>
</div>
<div id="37ffb8ec" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>dat <span class="op">=</span> [{<span class="st">'emails'</span>: [<span class="st">'a@x.com'</span>,<span class="st">'b@x.com'</span>]}, {<span class="st">'emails'</span>: []}, {<span class="st">'emails'</span>: [<span class="st">'c@x.com'</span>]}]</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>flatmap(Self[<span class="st">'emails'</span>], dat)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>['a@x.com', 'b@x.com', 'c@x.com']</code></pre>
</div>
</div>
<p>All files in multiple directories:</p>
<div id="da2cb7ef" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>flatmap(Self.iterdir(), [Path(<span class="st">'files'</span>), Path(<span class="st">'images'</span>)])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>[Path('files/test.txt.bz2'),
 Path('images/mnist3.png'),
 Path('images/att_00000.png'),
 Path('images/att_00005.png'),
 Path('images/att_00007.png'),
 Path('images/att_00006.png'),
 Path('images/puppy.jpg')]</code></pre>
</div>
</div>
<p>Pair each item with its factors:</p>
<div id="5122dfc9" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> factpairs(n): <span class="cf">return</span> [(n,i) <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>,n<span class="op">+</span><span class="dv">1</span>) <span class="cf">if</span> n<span class="op">%</span>i<span class="op">==</span><span class="dv">0</span>]</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>flatmap(factpairs, [<span class="dv">6</span>,<span class="dv">10</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>[(6, 1), (6, 2), (6, 3), (6, 6), (10, 1), (10, 2), (10, 5), (10, 10)]</code></pre>
</div>
</div>
</section>
</section>
<section id="l-helpers" class="level2">
<h2 class="anchored" data-anchor-id="l-helpers"><a href="https://fastcore.fast.ai/foundation.html#l"><code>L</code></a> helpers</h2>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L100" target="_blank" style="float:right; font-size:smaller">source</a></p>
<section id="collbase" class="level3">
<h3 class="anchored" data-anchor-id="collbase">CollBase</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> CollBase(</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>    items</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Base class for composing a list of <code>items</code></em></p>
<p><code>ColBase</code> is a base class that emulates the functionality of a python <code>list</code>:</p>
<div id="896956c4" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> _T(CollBase): <span class="cf">pass</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>l <span class="op">=</span> _T([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>])</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>test_eq(<span class="bu">len</span>(l), <span class="dv">5</span>) <span class="co"># __len__</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>test_eq(l[<span class="op">-</span><span class="dv">1</span>], <span class="dv">5</span>)<span class="op">;</span> test_eq(l[<span class="dv">0</span>], <span class="dv">1</span>) <span class="co">#__getitem__</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>l[<span class="dv">2</span>] <span class="op">=</span> <span class="dv">100</span><span class="op">;</span> test_eq(l[<span class="dv">2</span>], <span class="dv">100</span>)      <span class="co"># __set_item__</span></span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a><span class="kw">del</span> l[<span class="dv">0</span>]<span class="op">;</span> test_eq(<span class="bu">len</span>(l), <span class="dv">4</span>)        <span class="co"># __delitem__</span></span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>test_eq(<span class="bu">str</span>(l), <span class="st">'[2, 100, 4, 5]'</span>)   <span class="co"># __repr__</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L117" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="l" class="level3">
<h3 class="anchored" data-anchor-id="l">L</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> L(</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>    items:NoneType<span class="op">=</span><span class="va">None</span>, rest:VAR_POSITIONAL, use_list:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, match:NoneType<span class="op">=</span><span class="va">None</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Behaves like a list of <code>items</code> but can also index with list of indices or masks</em></p>
<p><a href="https://fastcore.fast.ai/foundation.html#l"><code>L</code></a> is a drop in replacement for a python <code>list</code>. Inspired by <a href="http://www.numpy.org/">NumPy</a>, <a href="https://fastcore.fast.ai/foundation.html#l"><code>L</code></a>, supports advanced indexing and has additional methods (outlined below) that provide additional functionality and encourage simple expressive code.</p>
</section>
<section id="examples-and-overview" class="level3">
<h3 class="anchored" data-anchor-id="examples-and-overview">Examples and overview</h3>
<div id="a8a78e40" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> fastcore.utils <span class="im">import</span> gt</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Read <a href="https://fastcore.fast.ai/tour.html#L">this overview section</a> for a quick tutorial of <a href="https://fastcore.fast.ai/foundation.html#l"><code>L</code></a>, as well as background on the name.</p>
<p>You can create an <a href="https://fastcore.fast.ai/foundation.html#l"><code>L</code></a> from an existing iterable (e.g.&nbsp;a list, range, etc) and access or modify it with an int list/tuple index, mask, int, or slice. All <code>list</code> methods can also be used with <a href="https://fastcore.fast.ai/foundation.html#l"><code>L</code></a>.</p>
<div id="72125daf" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> L(<span class="bu">range</span>(<span class="dv">12</span>))</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>test_eq(t, <span class="bu">list</span>(<span class="bu">range</span>(<span class="dv">12</span>)))</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>test_ne(t, <span class="bu">list</span>(<span class="bu">range</span>(<span class="dv">11</span>)))</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>t[<span class="dv">3</span>] <span class="op">=</span> <span class="st">"h"</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>test_eq(t[<span class="dv">3</span>], <span class="st">"h"</span>)</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>t[<span class="dv">3</span>,<span class="dv">5</span>] <span class="op">=</span> (<span class="st">"j"</span>,<span class="st">"k"</span>)</span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>test_eq(t[<span class="dv">3</span>,<span class="dv">5</span>], [<span class="st">"j"</span>,<span class="st">"k"</span>])</span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>test_eq(t, L(t))</span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>test_eq(L(L(<span class="dv">1</span>,<span class="dv">2</span>),[<span class="dv">3</span>,<span class="dv">4</span>]), ([<span class="dv">1</span>,<span class="dv">2</span>],[<span class="dv">3</span>,<span class="dv">4</span>]))</span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>t[<span class="dv">0</span>:<span class="dv">3</span>] <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a>test_eq(t[<span class="dv">0</span>:<span class="dv">3</span>], [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>])</span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>t</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>[1, 2, 3, 'j', 4, 'k', 6, 7, 8, 9, 10, 11]</code></pre>
</div>
</div>
<p>Any <a href="https://fastcore.fast.ai/foundation.html#l"><code>L</code></a> is a <code>Sequence</code> so you can use it with methods like <code>random.sample</code>:</p>
<div id="03129273" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="bu">isinstance</span>(t, Sequence)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="26bd9f4d" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb55"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> random</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="6786d495" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb56"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>random.seed(<span class="dv">0</span>)</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>random.sample(t, <span class="dv">3</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>[6, 11, 1]</code></pre>
</div>
</div>
<p>There are optimized indexers for arrays, tensors, and DataFrames.</p>
<div id="7de0e777" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb58"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="2f32ddb9" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb59"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> np.arange(<span class="dv">9</span>).reshape(<span class="dv">3</span>,<span class="dv">3</span>)</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> L(arr, use_list<span class="op">=</span><span class="va">None</span>)</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>test_eq(t[<span class="dv">1</span>,<span class="dv">2</span>], arr[[<span class="dv">1</span>,<span class="dv">2</span>]])</span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">'a'</span>:[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]})</span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> L(df, use_list<span class="op">=</span><span class="va">None</span>)</span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a>test_eq(t[<span class="dv">1</span>,<span class="dv">2</span>], L(pd.DataFrame({<span class="st">'a'</span>:[<span class="dv">2</span>,<span class="dv">3</span>]}, index<span class="op">=</span>[<span class="dv">1</span>,<span class="dv">2</span>]), use_list<span class="op">=</span><span class="va">None</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>You can also modify an <a href="https://fastcore.fast.ai/foundation.html#l"><code>L</code></a> with <code>append</code>, <code>+</code>, and <code>*</code>.</p>
<div id="8fc4ca2e" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb60"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> L()</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>test_eq(t, [])</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>t.append(<span class="dv">1</span>)</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>test_eq(t, [<span class="dv">1</span>])</span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>t <span class="op">+=</span> [<span class="dv">3</span>,<span class="dv">2</span>]</span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>test_eq(t, [<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">2</span>])</span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> t <span class="op">+</span> [<span class="dv">4</span>]</span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>test_eq(t, [<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">4</span>])</span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> <span class="dv">5</span> <span class="op">+</span> t</span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a>test_eq(t, [<span class="dv">5</span>,<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">4</span>])</span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a>test_eq(L(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>])</span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true" tabindex="-1"></a>test_eq(L(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), L(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>))</span>
<span id="cb60-13"><a href="#cb60-13" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> L(<span class="dv">1</span>)<span class="op">*</span><span class="dv">5</span></span>
<span id="cb60-14"><a href="#cb60-14" aria-hidden="true" tabindex="-1"></a>test_eq(<span class="op">~</span>L([<span class="va">True</span>,<span class="va">False</span>,<span class="va">False</span>]), L([<span class="va">False</span>,<span class="va">True</span>,<span class="va">True</span>]))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>An <a href="https://fastcore.fast.ai/foundation.html#l"><code>L</code></a> can be constructed from anything iterable, although tensors and arrays will not be iterated over on construction, unless you pass <code>use_list</code> to the constructor.</p>
<div id="c9d8144c" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb61"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>test_eq(L([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]),[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>])</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>test_eq(L(L([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>])),[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>])</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>test_ne(L([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]),[<span class="dv">1</span>,<span class="dv">2</span>,])</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>test_eq(L(<span class="st">'abc'</span>),[<span class="st">'abc'</span>])</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>test_eq(L(<span class="bu">range</span>(<span class="dv">0</span>,<span class="dv">3</span>)),[<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>])</span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>test_eq(L(o <span class="cf">for</span> o <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>,<span class="dv">3</span>)),[<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>])</span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>test_eq(L(array(<span class="dv">0</span>)),[array(<span class="dv">0</span>)])</span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>test_eq(L([array(<span class="dv">0</span>),array(<span class="dv">1</span>)]),[array(<span class="dv">0</span>),array(<span class="dv">1</span>)])</span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>test_eq(L(array([<span class="fl">0.</span>,<span class="fl">1.1</span>]))[<span class="dv">0</span>],array([<span class="fl">0.</span>,<span class="fl">1.1</span>]))</span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a>test_eq(L(array([<span class="fl">0.</span>,<span class="fl">1.1</span>]), use_list<span class="op">=</span><span class="va">True</span>), [array(<span class="fl">0.</span>),array(<span class="fl">1.1</span>)])  <span class="co"># `use_list=True` to unwrap arrays/arrays</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>If <code>match</code> is not <code>None</code> then the created list is same len as <code>match</code>, either by:</p>
<ul>
<li>If <code>len(items)==1</code> then <code>items</code> is replicated,</li>
<li>Otherwise an error is raised if <code>match</code> and <code>items</code> are not already the same size.</li>
</ul>
<div id="75d2daf4" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>test_eq(L(<span class="dv">1</span>,match<span class="op">=</span>[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]),[<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>])</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>test_eq(L([<span class="dv">1</span>,<span class="dv">2</span>],match<span class="op">=</span>[<span class="dv">2</span>,<span class="dv">3</span>]),[<span class="dv">1</span>,<span class="dv">2</span>])</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>test_fail(<span class="kw">lambda</span>: L([<span class="dv">1</span>,<span class="dv">2</span>],match<span class="op">=</span>[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>If you create an <a href="https://fastcore.fast.ai/foundation.html#l"><code>L</code></a> from an existing <a href="https://fastcore.fast.ai/foundation.html#l"><code>L</code></a> then you’ll get back the original object (since <a href="https://fastcore.fast.ai/foundation.html#l"><code>L</code></a> uses the <a href="https://fastcore.fast.ai/meta.html#newchkmeta"><code>NewChkMeta</code></a> metaclass).</p>
<div id="706d5ac7" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>test_is(L(t), t)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>An <a href="https://fastcore.fast.ai/foundation.html#l"><code>L</code></a> is considred equal to a list if they have the same elements. It’s never considered equal to a <code>str</code> a <code>set</code> or a <code>dict</code> even if they have the same elements/keys.</p>
<div id="a208d40c" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb64"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>test_eq(L([<span class="st">'a'</span>, <span class="st">'b'</span>]), [<span class="st">'a'</span>, <span class="st">'b'</span>])</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>test_ne(L([<span class="st">'a'</span>, <span class="st">'b'</span>]), <span class="st">'ab'</span>)</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>test_ne(L([<span class="st">'a'</span>, <span class="st">'b'</span>]), {<span class="st">'a'</span>:<span class="dv">1</span>, <span class="st">'b'</span>:<span class="dv">2</span>})</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="l-methods" class="level3">
<h3 class="anchored" data-anchor-id="l-methods"><a href="https://fastcore.fast.ai/foundation.html#l"><code>L</code></a> Methods</h3>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L128" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="l.__getitem__" class="level3">
<h3 class="anchored" data-anchor-id="l.__getitem__">L.__getitem__</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb65"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="fu">__getitem__</span>(</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>    idx</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Retrieve <code>idx</code> (can be list of indices, or mask, or int) items</em></p>
<div id="a6edf562" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb66"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> L(<span class="bu">range</span>(<span class="dv">12</span>))</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>test_eq(t[<span class="dv">1</span>,<span class="dv">2</span>], [<span class="dv">1</span>,<span class="dv">2</span>])                <span class="co"># implicit tuple</span></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>test_eq(t[[<span class="dv">1</span>,<span class="dv">2</span>]], [<span class="dv">1</span>,<span class="dv">2</span>])              <span class="co"># list</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>test_eq(t[:<span class="dv">3</span>], [<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>])               <span class="co"># slice</span></span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>test_eq(t[[<span class="va">False</span>]<span class="op">*</span><span class="dv">11</span> <span class="op">+</span> [<span class="va">True</span>]], [<span class="dv">11</span>]) <span class="co"># mask</span></span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a>test_eq(t[array(<span class="dv">3</span>)], <span class="dv">3</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L140" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="l.__setitem__" class="level3">
<h3 class="anchored" data-anchor-id="l.__setitem__">L.__setitem__</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb67"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="fu">__setitem__</span>(</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>    idx, o</span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Set <code>idx</code> (can be list of indices, or mask, or int) items to <code>o</code> (which is broadcast if not iterable)</em></p>
<div id="b84c56e3" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb68"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>t[<span class="dv">4</span>,<span class="dv">6</span>] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>test_eq(t[<span class="dv">4</span>,<span class="dv">6</span>], [<span class="dv">0</span>,<span class="dv">0</span>])</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>t[<span class="dv">4</span>,<span class="dv">6</span>] <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">2</span>]</span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>test_eq(t[<span class="dv">4</span>,<span class="dv">6</span>], [<span class="dv">1</span>,<span class="dv">2</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L180" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="l.unique" class="level3">
<h3 class="anchored" data-anchor-id="l.unique">L.unique</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb69"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> unique(</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>    sort:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, bidir:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, start:NoneType<span class="op">=</span><span class="va">None</span></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Unique items, in stable order</em></p>
<div id="62aa9a1a" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb70"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>test_eq(L(<span class="dv">4</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">4</span>).unique(), [<span class="dv">4</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L186" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="l.val2idx" class="level3">
<h3 class="anchored" data-anchor-id="l.val2idx">L.val2idx</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb71"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> val2idx(</span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Dict from value to index</em></p>
<div id="76dd07e3" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb72"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>test_eq(L(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>).val2idx(), {<span class="dv">3</span>:<span class="dv">2</span>,<span class="dv">1</span>:<span class="dv">0</span>,<span class="dv">2</span>:<span class="dv">1</span>})</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L192" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="l.range" class="level3">
<h3 class="anchored" data-anchor-id="l.range">L.range</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb73"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="bu">range</span>(</span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>    a, b:NoneType<span class="op">=</span><span class="va">None</span>, step:NoneType<span class="op">=</span><span class="va">None</span></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Class Method: Same as <code>range</code>, but returns <a href="https://fastcore.fast.ai/foundation.html#l"><code>L</code></a>. Can pass collection for <code>a</code>, to use <code>len(a)</code></em></p>
<div id="f7d0109a" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb74"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>test_eq_type(L.<span class="bu">range</span>([<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>]), L(<span class="bu">range</span>(<span class="dv">3</span>)))</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>test_eq_type(L.<span class="bu">range</span>(<span class="dv">5</span>,<span class="dv">2</span>,<span class="dv">2</span>), L(<span class="bu">range</span>(<span class="dv">5</span>,<span class="dv">2</span>,<span class="dv">2</span>)))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L198" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="l.enumerate" class="level3">
<h3 class="anchored" data-anchor-id="l.enumerate">L.enumerate</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb75"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="bu">enumerate</span>(</span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Same as <code>enumerate</code></em></p>
<div id="4592473d" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb76"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>test_eq(L(<span class="st">'a'</span>,<span class="st">'b'</span>,<span class="st">'c'</span>).<span class="bu">enumerate</span>(), [(<span class="dv">0</span>,<span class="st">'a'</span>),(<span class="dv">1</span>,<span class="st">'b'</span>),(<span class="dv">2</span>,<span class="st">'c'</span>)])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L204" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="l.renumerate" class="level3">
<h3 class="anchored" data-anchor-id="l.renumerate">L.renumerate</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb77"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> renumerate(</span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Same as <a href="https://fastcore.fast.ai/basics.html#renumerate"><code>renumerate</code></a></em></p>
<div id="3fd03f76" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb78"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>test_eq(L(<span class="st">'a'</span>,<span class="st">'b'</span>,<span class="st">'c'</span>).renumerate(), [(<span class="st">'a'</span>, <span class="dv">0</span>), (<span class="st">'b'</span>, <span class="dv">1</span>), (<span class="st">'c'</span>, <span class="dv">2</span>)])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L210" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="l.split" class="level3">
<h3 class="anchored" data-anchor-id="l.split">L.split</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb79"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> split(</span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>    s, sep:NoneType<span class="op">=</span><span class="va">None</span>, maxsplit:<span class="bu">int</span><span class="op">=-</span><span class="dv">1</span></span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Class Method: Same as <code>str.split</code>, but returns an <a href="https://fastcore.fast.ai/foundation.html#l"><code>L</code></a></em></p>
<p><a href="https://fastcore.fast.ai/foundation.html#l.split"><code>L.split</code></a> is a class method that works like <code>str.split</code>, but returns an <a href="https://fastcore.fast.ai/foundation.html#l"><code>L</code></a> instead of a list:</p>
<div id="5b9583f3" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb80"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>test_eq(L.split(<span class="st">'a b c'</span>), [<span class="st">'a'</span>,<span class="st">'b'</span>,<span class="st">'c'</span>])</span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>test_eq(L.split(<span class="st">'a-b-c'</span>, <span class="st">'-'</span>), [<span class="st">'a'</span>,<span class="st">'b'</span>,<span class="st">'c'</span>])</span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>test_eq(L.split(<span class="st">'a-b-c'</span>, <span class="st">'-'</span>, maxsplit<span class="op">=</span><span class="dv">1</span>), [<span class="st">'a'</span>,<span class="st">'b-c'</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L216" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="l.splitlines" class="level3">
<h3 class="anchored" data-anchor-id="l.splitlines">L.splitlines</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb81"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> splitlines(</span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>    s, keepends:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span></span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Class Method: Same as <code>str.splitlines</code>, but returns an <a href="https://fastcore.fast.ai/foundation.html#l"><code>L</code></a></em></p>
<p><a href="https://fastcore.fast.ai/foundation.html#l.splitlines"><code>L.splitlines</code></a> is a class method that works like <code>str.splitlines</code>, but returns an <a href="https://fastcore.fast.ai/foundation.html#l"><code>L</code></a> instead of a list:</p>
<div id="2508910d" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb82"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>test_eq(L.splitlines(<span class="st">'a</span><span class="ch">\n</span><span class="st">b</span><span class="ch">\n</span><span class="st">c'</span>), [<span class="st">'a'</span>,<span class="st">'b'</span>,<span class="st">'c'</span>])</span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>test_eq(L.splitlines(<span class="st">'a</span><span class="ch">\n</span><span class="st">b</span><span class="ch">\n</span><span class="st">c'</span>, keepends<span class="op">=</span><span class="va">True</span>), [<span class="st">'a</span><span class="ch">\n</span><span class="st">'</span>,<span class="st">'b</span><span class="ch">\n</span><span class="st">'</span>,<span class="st">'c'</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L221" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="curryable" class="level3">
<h3 class="anchored" data-anchor-id="curryable">curryable</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb83"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> curryable(</span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>    f</span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>The <a href="https://fastcore.fast.ai/foundation.html#curryable"><code>curryable</code></a> decorator enables a powerful pattern: methods decorated with it can be called either as instance methods (the normal way) or as class methods that return a partial function.</p>
<p>For instance, consider processing nested data structures. Without curryable, you’d write:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb84"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>L(lines).<span class="bu">map</span>(<span class="kw">lambda</span> x: L(x).<span class="bu">map</span>(<span class="bu">int</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>With curryable, you can write:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb85"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>L(lines).<span class="bu">map</span>(L.<span class="bu">map</span>(<span class="bu">int</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>When you call <code>L.map(int)</code> on the class (not an instance), the decorator returns a <code>functools.partial</code> that waits for an iterable to be passed in later.</p>
<p>This pattern is especially valuable for data parsing pipelines where you’re frequently mapping transformations over nested structures. The curried form reads more naturally and composes well with other curried functions like <a href="https://fastcore.fast.ai/foundation.html#splitter"><code>splitter()</code></a> and <a href="https://fastcore.fast.ai/foundation.html#linesplitter"><code>linesplitter()</code></a>.</p>
<hr>
</section>
<section id="map" class="level3">
<h3 class="anchored" data-anchor-id="map">map</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb86"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="bu">map</span>(</span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>    f, args:VAR_POSITIONAL, kwargs:VAR_KEYWORD</span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Create new <a href="https://fastcore.fast.ai/foundation.html#l"><code>L</code></a> with <code>f</code> applied to all <code>items</code>, passing <code>args</code> and <code>kwargs</code> to <code>f</code></em></p>
<div id="566326ab" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb87"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>test_eq(L.<span class="bu">range</span>(<span class="dv">4</span>).<span class="bu">map</span>(operator.neg), [<span class="dv">0</span>,<span class="op">-</span><span class="dv">1</span>,<span class="op">-</span><span class="dv">2</span>,<span class="op">-</span><span class="dv">3</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>If <code>f</code> is a string then it is treated as a format string to create the mapping:</p>
<div id="24680aae" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb88"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>test_eq(L.<span class="bu">range</span>(<span class="dv">4</span>).<span class="bu">map</span>(<span class="st">'#</span><span class="sc">{}</span><span class="st">#'</span>), [<span class="st">'#0#'</span>,<span class="st">'#1#'</span>,<span class="st">'#2#'</span>,<span class="st">'#3#'</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>If <code>f</code> is a dictionary (or anything supporting <code>__getitem__</code>) then it is indexed to create the mapping:</p>
<div id="57657757" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb89"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>test_eq(L.<span class="bu">range</span>(<span class="dv">4</span>).<span class="bu">map</span>(<span class="bu">list</span>(<span class="st">'abcd'</span>)), <span class="bu">list</span>(<span class="st">'abcd'</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>You can also pass the same <code>arg</code> params that <a href="https://fastcore.fast.ai/basics.html#bind"><code>bind</code></a> accepts:</p>
<div id="4d14fb0f" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb90"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> f(a<span class="op">=</span><span class="va">None</span>,b<span class="op">=</span><span class="va">None</span>): <span class="cf">return</span> b</span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>test_eq(L.<span class="bu">range</span>(<span class="dv">4</span>).<span class="bu">map</span>(f, b<span class="op">=</span>arg0), <span class="bu">range</span>(<span class="dv">4</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L236" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="splitter" class="level3">
<h3 class="anchored" data-anchor-id="splitter">splitter</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb91"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> splitter(</span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>    sep:NoneType<span class="op">=</span><span class="va">None</span>, maxsplit:<span class="bu">int</span><span class="op">=-</span><span class="dv">1</span></span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Create a partial function that splits strings into <a href="https://fastcore.fast.ai/foundation.html#l"><code>L</code></a></em></p>
<p>A curried version of <a href="https://fastcore.fast.ai/foundation.html#l.split"><code>L.split</code></a>, useful for mapping over collections of strings. For instance to split some lines with the same separator:</p>
<div id="047fc5bf" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb92"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> <span class="st">'''1,2,3</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a><span class="st">4,5,6</span></span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a><span class="st">7,8,9'''</span></span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a>grid <span class="op">=</span> L.splitlines(data).<span class="bu">map</span>(splitter(<span class="st">','</span>))</span>
<span id="cb92-6"><a href="#cb92-6" aria-hidden="true" tabindex="-1"></a>grid</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>[['1', '2', '3'], ['4', '5', '6'], ['7', '8', '9']]</code></pre>
</div>
</div>
<p>As mentioned in the <a href="https://fastcore.fast.ai/foundation.html#curryable"><code>curryable</code></a> discussion, <code>map</code> can be curried. This can work well together with <a href="https://fastcore.fast.ai/foundation.html#l.splitlines"><code>L.splitlines</code></a> output:</p>
<div id="d3f55753" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb94"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>intgrid <span class="op">=</span> grid.<span class="bu">map</span>(L.<span class="bu">map</span>(<span class="bu">int</span>))</span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>intgrid</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>[[1, 2, 3], [4, 5, 6], [7, 8, 9]]</code></pre>
</div>
</div>
<p>Although in this particular example numpy has a useful shortcut:</p>
<div id="6665dc80" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb96"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>np.genfromtxt(data.splitlines(), delimiter<span class="op">=</span><span class="st">','</span>, dtype<span class="op">=</span><span class="bu">int</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>array([[1, 2, 3],
       [4, 5, 6],
       [7, 8, 9]])</code></pre>
</div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L241" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="linesplitter" class="level3">
<h3 class="anchored" data-anchor-id="linesplitter">linesplitter</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb98"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> linesplitter(</span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a>    keepends:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span></span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb98-5"><a href="#cb98-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Create a partial function that splits strings by lines into <a href="https://fastcore.fast.ai/foundation.html#l"><code>L</code></a></em></p>
<p>A curried version of <a href="https://fastcore.fast.ai/foundation.html#l.splitlines"><code>L.splitlines</code></a>, useful for splitting multi-line strings into <a href="https://fastcore.fast.ai/foundation.html#l"><code>L</code></a>s when mapping over a collection.</p>
<div id="51b78c23" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb99"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>L([<span class="st">'a</span><span class="ch">\n</span><span class="st">b</span><span class="ch">\n</span><span class="st">c'</span>, <span class="st">'d</span><span class="ch">\n</span><span class="st">e'</span>]).<span class="bu">map</span>(linesplitter())</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>[['a', 'b', 'c'], ['d', 'e']]</code></pre>
</div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/basics.py#L652" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="groupby" class="level3">
<h3 class="anchored" data-anchor-id="groupby">groupby</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb101"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> groupby(</span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>    key, val:function<span class="op">=&lt;</span>function noop at <span class="bn">0x7f158aa50d60</span><span class="op">&gt;</span></span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb101-5"><a href="#cb101-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Same as <a href="https://fastcore.fast.ai/basics.html#groupby"><code>fastcore.basics.groupby</code></a></em></p>
<div id="d0db8cbb" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb102"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>words <span class="op">=</span> L.split(<span class="st">'aaa abc bba'</span>)</span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a>test_eq(words.groupby(<span class="dv">0</span>, (<span class="dv">1</span>,<span class="dv">2</span>)), {<span class="st">'a'</span>:[(<span class="st">'a'</span>,<span class="st">'a'</span>),(<span class="st">'b'</span>,<span class="st">'c'</span>)], <span class="st">'b'</span>:[(<span class="st">'b'</span>,<span class="st">'a'</span>)]})</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><a href="https://fastcore.fast.ai/foundation.html#l.groupby"><code>L.groupby</code></a> can also be used in curried form, which is useful when you need to apply the same grouping operation across multiple collections.</p>
<div id="f7669c31" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb103"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>L([[<span class="st">'a1'</span>,<span class="st">'b2'</span>,<span class="st">'a3'</span>], [<span class="st">'x1'</span>,<span class="st">'y2'</span>,<span class="st">'x3'</span>]]).<span class="bu">map</span>(L.groupby(<span class="dv">0</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>[{'a': ['a1', 'a3'], 'b': ['b2']}, {'x': ['x1', 'x3'], 'y': ['y2']}]</code></pre>
</div>
</div>
<hr>
</section>
<section id="starmap" class="level3">
<h3 class="anchored" data-anchor-id="starmap">starmap</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb105"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> starmap(</span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a>    f, args:VAR_POSITIONAL, kwargs:VAR_KEYWORD</span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb105-5"><a href="#cb105-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Like <code>map</code>, but use <code>itertools.starmap</code></em></p>
<p><a href="https://fastcore.fast.ai/foundation.html#l.starmap"><code>L.starmap</code></a> applies a function to each element, unpacking tuples as arguments:</p>
<div id="45316c68" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb106"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>test_eq(L([(<span class="dv">1</span>,<span class="dv">2</span>),(<span class="dv">3</span>,<span class="dv">4</span>)]).starmap(operator.add), [<span class="dv">3</span>,<span class="dv">7</span>])</span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a>test_eq(L([(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>),(<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>)]).starmap(<span class="kw">lambda</span> a,b,c: a<span class="op">+</span>b<span class="op">*</span>c), [<span class="dv">7</span>,<span class="dv">34</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>The curried form of <a href="https://fastcore.fast.ai/foundation.html#l.starmap"><code>L.starmap</code></a> is useful when you need to apply the same starmap operation across nested structures. For example, when you have a list of lists of tuples and want to apply a function that unpacks each tuple:</p>
<div id="0acf95c8" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb107"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>nested <span class="op">=</span> L([[(<span class="dv">1</span>,<span class="dv">2</span>),(<span class="dv">3</span>,<span class="dv">4</span>)], [(<span class="dv">5</span>,<span class="dv">6</span>),(<span class="dv">7</span>,<span class="dv">8</span>)]])</span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>nested.<span class="bu">map</span>(L.starmap(operator.mul))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>[[2, 12], [30, 56]]</code></pre>
</div>
</div>
<hr>
</section>
<section id="rstarmap" class="level3">
<h3 class="anchored" data-anchor-id="rstarmap">rstarmap</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb109"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> rstarmap(</span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a>    f, args:VAR_POSITIONAL, kwargs:VAR_KEYWORD</span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb109-5"><a href="#cb109-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Like <code>starmap</code>, but reverse the order of args</em></p>
<p><a href="https://fastcore.fast.ai/foundation.html#l.rstarmap"><code>L.rstarmap</code></a> is like <code>starmap</code>, but reverses the order of unpacked arguments:</p>
<div id="5c03c922" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb110"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>test_eq(L((<span class="dv">1</span>,<span class="dv">2</span>),(<span class="dv">3</span>,<span class="dv">4</span>)).rstarmap(operator.sub), [<span class="dv">1</span>,<span class="dv">1</span>])  <span class="co"># 2-1, 4-3</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>test_eq(L((<span class="st">'a'</span>,<span class="st">'b'</span>),(<span class="st">'c'</span>,<span class="st">'d'</span>)).rstarmap(<span class="st">'</span><span class="sc">{}{}</span><span class="st">'</span>.<span class="bu">format</span>), [<span class="st">'ba'</span>,<span class="st">'dc'</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>The curried form of <a href="https://fastcore.fast.ai/foundation.html#l.rstarmap"><code>L.rstarmap</code></a> is useful when mapping over nested structures where you need reversed argument order. This commonly occurs when processing pairs where the second element should be the first argument to a function:</p>
<div id="9c3815ac" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb111"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a>nested <span class="op">=</span> L([[(<span class="st">'x'</span>,<span class="dv">1</span>),(<span class="st">'y'</span>,<span class="dv">2</span>)], [(<span class="st">'z'</span>,<span class="dv">3</span>)]])</span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>nested.<span class="bu">map</span>(L.rstarmap(<span class="st">'</span><span class="sc">{}{}</span><span class="st">'</span>.<span class="bu">format</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>[['1x', '2y'], ['3z']]</code></pre>
</div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L268" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="l.map_dict" class="level3">
<h3 class="anchored" data-anchor-id="l.map_dict">L.map_dict</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb113"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> map_dict(</span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a>    f:function<span class="op">=&lt;</span>function noop at <span class="bn">0x7f158aa50d60</span><span class="op">&gt;</span>, args:VAR_POSITIONAL, kwargs:VAR_KEYWORD</span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb113-5"><a href="#cb113-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Like <code>map</code>, but creates a dict from <code>items</code> to function results</em></p>
<div id="92f098d8" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb114"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>test_eq(L(<span class="bu">range</span>(<span class="dv">1</span>,<span class="dv">5</span>)).map_dict(), {<span class="dv">1</span>:<span class="dv">1</span>, <span class="dv">2</span>:<span class="dv">2</span>, <span class="dv">3</span>:<span class="dv">3</span>, <span class="dv">4</span>:<span class="dv">4</span>})</span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a>test_eq(L(<span class="bu">range</span>(<span class="dv">1</span>,<span class="dv">5</span>)).map_dict(operator.neg), {<span class="dv">1</span>:<span class="op">-</span><span class="dv">1</span>, <span class="dv">2</span>:<span class="op">-</span><span class="dv">2</span>, <span class="dv">3</span>:<span class="op">-</span><span class="dv">3</span>, <span class="dv">4</span>:<span class="op">-</span><span class="dv">4</span>})</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L274" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="l.zip" class="level3">
<h3 class="anchored" data-anchor-id="l.zip">L.zip</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb115"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="bu">zip</span>(</span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a>    cycled:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span></span>
<span id="cb115-4"><a href="#cb115-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb115-5"><a href="#cb115-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Create new <a href="https://fastcore.fast.ai/foundation.html#l"><code>L</code></a> with <code>zip(*items)</code></em></p>
<div id="b9883e0c" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb116"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> L([[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>],<span class="st">'abc'</span>])</span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a>test_eq(t.<span class="bu">zip</span>(), [(<span class="dv">1</span>, <span class="st">'a'</span>),(<span class="dv">2</span>, <span class="st">'b'</span>),(<span class="dv">3</span>, <span class="st">'c'</span>)])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="702912aa" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb117"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> L([[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>],[<span class="st">'a'</span>,<span class="st">'b'</span>,<span class="st">'c'</span>]])</span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a>test_eq(t.<span class="bu">zip</span>(cycled<span class="op">=</span><span class="va">True</span> ), [(<span class="dv">1</span>, <span class="st">'a'</span>),(<span class="dv">2</span>, <span class="st">'b'</span>),(<span class="dv">3</span>, <span class="st">'c'</span>),(<span class="dv">4</span>, <span class="st">'a'</span>)])</span>
<span id="cb117-3"><a href="#cb117-3" aria-hidden="true" tabindex="-1"></a>test_eq(t.<span class="bu">zip</span>(cycled<span class="op">=</span><span class="va">False</span>), [(<span class="dv">1</span>, <span class="st">'a'</span>),(<span class="dv">2</span>, <span class="st">'b'</span>),(<span class="dv">3</span>, <span class="st">'c'</span>)])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L280" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="l.map_zip" class="level3">
<h3 class="anchored" data-anchor-id="l.map_zip">L.map_zip</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb118"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> map_zip(</span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a>    f, args:VAR_POSITIONAL, cycled:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, kwargs:VAR_KEYWORD</span>
<span id="cb118-4"><a href="#cb118-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb118-5"><a href="#cb118-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Combine <code>zip</code> and <code>starmap</code></em></p>
<div id="d645b000" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb119"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> L([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>],[<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>])</span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>test_eq(t.map_zip(operator.mul), [<span class="dv">2</span>,<span class="dv">6</span>,<span class="dv">12</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L286" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="l.zipwith" class="level3">
<h3 class="anchored" data-anchor-id="l.zipwith">L.zipwith</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb120"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> zipwith(</span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true" tabindex="-1"></a>    rest:VAR_POSITIONAL, cycled:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span></span>
<span id="cb120-4"><a href="#cb120-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb120-5"><a href="#cb120-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Create new <a href="https://fastcore.fast.ai/foundation.html#l"><code>L</code></a> with <code>self</code> zip with each of <code>*rest</code></em></p>
<div id="f10ffe4f" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb121"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> [[<span class="dv">0</span>],[<span class="dv">1</span>],[<span class="dv">2</span>,<span class="dv">2</span>]]</span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> L([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]).zipwith(b)</span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a>test_eq(t, [(<span class="dv">1</span>,[<span class="dv">0</span>]), (<span class="dv">2</span>,[<span class="dv">1</span>]), (<span class="dv">3</span>,[<span class="dv">2</span>,<span class="dv">2</span>])])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L292" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="l.map_zipwith" class="level3">
<h3 class="anchored" data-anchor-id="l.map_zipwith">L.map_zipwith</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb122"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> map_zipwith(</span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a>    f, rest:VAR_POSITIONAL, cycled:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, kwargs:VAR_KEYWORD</span>
<span id="cb122-4"><a href="#cb122-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb122-5"><a href="#cb122-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Combine <code>zipwith</code> and <code>starmap</code></em></p>
<div id="bf653b2b" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb123"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a>test_eq(L(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>).map_zipwith(operator.mul, [<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>]), [<span class="dv">2</span>,<span class="dv">6</span>,<span class="dv">12</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
</section>
<section id="filter" class="level3">
<h3 class="anchored" data-anchor-id="filter">filter</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb124"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="bu">filter</span>(</span>
<span id="cb124-3"><a href="#cb124-3" aria-hidden="true" tabindex="-1"></a>    f:function<span class="op">=&lt;</span>function noop at <span class="bn">0x7f158aa50d60</span><span class="op">&gt;</span>, negate:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, kwargs:VAR_KEYWORD</span>
<span id="cb124-4"><a href="#cb124-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb124-5"><a href="#cb124-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Create new <a href="https://fastcore.fast.ai/foundation.html#l"><code>L</code></a> filtered by predicate <code>f</code>, passing <code>args</code> and <code>kwargs</code> to <code>f</code></em></p>
<div id="669d3a5c" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb125"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> L(<span class="bu">range</span>(<span class="dv">12</span>))</span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a>test_eq(t.<span class="bu">filter</span>(<span class="kw">lambda</span> o:o<span class="op">&lt;</span><span class="dv">5</span>), [<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>])</span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a>test_eq(t.<span class="bu">filter</span>(<span class="kw">lambda</span> o:o<span class="op">&lt;</span><span class="dv">5</span>, negate<span class="op">=</span><span class="va">True</span>), [<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>,<span class="dv">10</span>,<span class="dv">11</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><a href="https://fastcore.fast.ai/foundation.html#l.filter"><code>L.filter</code></a> can be used as a curried class method, returning a partial that filters any iterable and wraps the result in an <a href="https://fastcore.fast.ai/foundation.html#l"><code>L</code></a>. This is useful when mapping a filter operation over nested collections.</p>
<div id="616fed64" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb126"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a>intgrid</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>[[1, 2, 3], [4, 5, 6], [7, 8, 9]]</code></pre>
</div>
</div>
<div id="d1735243" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb128"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a>intgrid.<span class="bu">map</span>(L.<span class="bu">filter</span>(ge(<span class="dv">5</span>)))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>[[], [5, 6], [7, 8, 9]]</code></pre>
</div>
</div>
<hr>
</section>
<section id="starfilter" class="level3">
<h3 class="anchored" data-anchor-id="starfilter">starfilter</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb130"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> starfilter(</span>
<span id="cb130-3"><a href="#cb130-3" aria-hidden="true" tabindex="-1"></a>    f, negate:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, kwargs:VAR_KEYWORD</span>
<span id="cb130-4"><a href="#cb130-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb130-5"><a href="#cb130-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Like <code>filter</code>, but unpacks elements as args to <code>f</code></em></p>
<p><a href="https://fastcore.fast.ai/foundation.html#l.starfilter"><code>L.starfilter</code></a> is like <code>filter</code>, but unpacks tuple elements as arguments to the predicate:</p>
<div id="cb878281" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb131"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a>test_eq(L((<span class="dv">1</span>,<span class="dv">2</span>),(<span class="dv">3</span>,<span class="dv">1</span>),(<span class="dv">2</span>,<span class="dv">3</span>)).starfilter(lt), [(<span class="dv">1</span>,<span class="dv">2</span>),(<span class="dv">2</span>,<span class="dv">3</span>)])</span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a>test_eq(L((<span class="dv">1</span>,<span class="dv">2</span>),(<span class="dv">3</span>,<span class="dv">1</span>),(<span class="dv">2</span>,<span class="dv">3</span>)).starfilter(lt, negate<span class="op">=</span><span class="va">True</span>), [(<span class="dv">3</span>,<span class="dv">1</span>)])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Curried <a href="https://fastcore.fast.ai/foundation.html#l.starfilter"><code>L.starfilter</code></a> is useful when mapping a starfilter operation over nested collections—each inner collection gets filtered by unpacking its tuples as arguments to the predicate, eg to filter pairs where first &lt; second, across multiple lists of pairs:</p>
<div id="e939f0d3" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb132"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a>nested <span class="op">=</span> L([[(<span class="dv">1</span>,<span class="dv">5</span>),(<span class="dv">3</span>,<span class="dv">2</span>)], [(<span class="dv">4</span>,<span class="dv">6</span>),(<span class="dv">9</span>,<span class="dv">1</span>)]])</span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a>nested.<span class="bu">map</span>(L.starfilter(lt))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>[[(1, 5)], [(4, 6)]]</code></pre>
</div>
</div>
<hr>
</section>
<section id="rstarfilter" class="level3">
<h3 class="anchored" data-anchor-id="rstarfilter">rstarfilter</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb134"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> rstarfilter(</span>
<span id="cb134-3"><a href="#cb134-3" aria-hidden="true" tabindex="-1"></a>    f, negate:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, kwargs:VAR_KEYWORD</span>
<span id="cb134-4"><a href="#cb134-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb134-5"><a href="#cb134-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Like <code>starfilter</code>, but reverse the order of args</em></p>
<p><a href="https://fastcore.fast.ai/foundation.html#l.rstarfilter"><code>L.rstarfilter</code></a> is like <code>starfilter</code>, but reverses the order of unpacked arguments (and can also be curried):</p>
<div id="a26c1ac4" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb135"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a>test_eq(L((<span class="dv">2</span>,<span class="dv">1</span>),(<span class="dv">1</span>,<span class="dv">3</span>),(<span class="dv">3</span>,<span class="dv">2</span>)).rstarfilter(lt), [(<span class="dv">2</span>,<span class="dv">1</span>),(<span class="dv">3</span>,<span class="dv">2</span>)])  <span class="co"># 1&lt;2, 3&lt;1 fails, 2&lt;3</span></span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a>test_eq(L((<span class="dv">2</span>,<span class="dv">1</span>),(<span class="dv">1</span>,<span class="dv">3</span>),(<span class="dv">3</span>,<span class="dv">2</span>)).rstarfilter(lt, negate<span class="op">=</span><span class="va">True</span>), [(<span class="dv">1</span>,<span class="dv">3</span>)])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/basics.py#L711" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="argwhere" class="level3">
<h3 class="anchored" data-anchor-id="argwhere">argwhere</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb136"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> argwhere(</span>
<span id="cb136-3"><a href="#cb136-3" aria-hidden="true" tabindex="-1"></a>    f, negate:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, kwargs:VAR_KEYWORD</span>
<span id="cb136-4"><a href="#cb136-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb136-5"><a href="#cb136-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Like <code>filter</code>, but return indices for matching items</em></p>
<div id="6f637a43" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb137"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> L([<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">99</span>,<span class="dv">0</span>])</span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a>test_eq(t.argwhere(<span class="kw">lambda</span> o:o<span class="op">&lt;</span><span class="dv">5</span>), [<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">6</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
</section>
<section id="starargwhere" class="level3">
<h3 class="anchored" data-anchor-id="starargwhere">starargwhere</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb138"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> starargwhere(</span>
<span id="cb138-3"><a href="#cb138-3" aria-hidden="true" tabindex="-1"></a>    f, negate:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span></span>
<span id="cb138-4"><a href="#cb138-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb138-5"><a href="#cb138-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Like <a href="https://fastcore.fast.ai/basics.html#argwhere"><code>argwhere</code></a>, but unpacks elements as args to <code>f</code></em></p>
<p><a href="https://fastcore.fast.ai/foundation.html#l.starargwhere"><code>L.starargwhere</code></a> is like <a href="https://fastcore.fast.ai/basics.html#argwhere"><code>argwhere</code></a>, but unpacks tuple elements as arguments to the predicate (it is also curryable):</p>
<div id="a4766805" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb139"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a>test_eq(L((<span class="dv">1</span>,<span class="dv">2</span>),(<span class="dv">3</span>,<span class="dv">1</span>),(<span class="dv">2</span>,<span class="dv">3</span>)).starargwhere(lt), [<span class="dv">0</span>,<span class="dv">2</span>])</span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a>test_eq(L((<span class="dv">1</span>,<span class="dv">2</span>),(<span class="dv">3</span>,<span class="dv">1</span>),(<span class="dv">2</span>,<span class="dv">3</span>)).starargwhere(lt, negate<span class="op">=</span><span class="va">True</span>), [<span class="dv">1</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
</section>
<section id="rstarargwhere" class="level3">
<h3 class="anchored" data-anchor-id="rstarargwhere">rstarargwhere</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb140"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-2"><a href="#cb140-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> rstarargwhere(</span>
<span id="cb140-3"><a href="#cb140-3" aria-hidden="true" tabindex="-1"></a>    f, negate:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span></span>
<span id="cb140-4"><a href="#cb140-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb140-5"><a href="#cb140-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Like <code>starargwhere</code>, but reverse the order of args</em></p>
<p><a href="https://fastcore.fast.ai/foundation.html#l.rstarargwhere"><code>L.rstarargwhere</code></a> is like <code>starargwhere</code>, but reverses the order of unpacked arguments (it is also curryable):</p>
<div id="155730fd" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb141"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a>test_eq(L((<span class="dv">2</span>,<span class="dv">1</span>),(<span class="dv">1</span>,<span class="dv">3</span>),(<span class="dv">3</span>,<span class="dv">2</span>)).rstarargwhere(lt), [<span class="dv">0</span>,<span class="dv">2</span>])  <span class="co"># 1&lt;2, 3&lt;1 fails, 2&lt;3</span></span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a>test_eq(L((<span class="dv">2</span>,<span class="dv">1</span>),(<span class="dv">1</span>,<span class="dv">3</span>),(<span class="dv">3</span>,<span class="dv">2</span>)).rstarargwhere(lt, negate<span class="op">=</span><span class="va">True</span>), [<span class="dv">1</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
</section>
<section id="argfirst" class="level3">
<h3 class="anchored" data-anchor-id="argfirst">argfirst</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb142"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-2"><a href="#cb142-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> argfirst(</span>
<span id="cb142-3"><a href="#cb142-3" aria-hidden="true" tabindex="-1"></a>    f, negate:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span></span>
<span id="cb142-4"><a href="#cb142-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb142-5"><a href="#cb142-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Return index of first matching item</em></p>
<div id="eee16654" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb143"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a>test_eq(t.argfirst(<span class="kw">lambda</span> o:o<span class="op">&gt;</span><span class="dv">4</span>), <span class="dv">5</span>)</span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a>test_eq(t.argfirst(<span class="kw">lambda</span> o:o<span class="op">&gt;</span><span class="dv">4</span>,negate<span class="op">=</span><span class="va">True</span>),<span class="dv">0</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Curried <a href="https://fastcore.fast.ai/foundation.html#l.argfirst"><code>L.argfirst</code></a> returns a partial function that finds the index of the first matching item in any iterable. This is useful when mapping over nested collections to find the first match in each.</p>
<div id="500f6cfc" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb144"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a>nested <span class="op">=</span> L([[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">8</span>,<span class="dv">4</span>], [<span class="dv">5</span>,<span class="dv">9</span>,<span class="dv">7</span>], [<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>]])</span>
<span id="cb144-2"><a href="#cb144-2" aria-hidden="true" tabindex="-1"></a>nested.<span class="bu">map</span>(L.argfirst(gt(<span class="dv">5</span>)))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>[2, 1, None]</code></pre>
</div>
</div>
<hr>
</section>
<section id="starargfirst" class="level3">
<h3 class="anchored" data-anchor-id="starargfirst">starargfirst</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb146"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-2"><a href="#cb146-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> starargfirst(</span>
<span id="cb146-3"><a href="#cb146-3" aria-hidden="true" tabindex="-1"></a>    f, negate:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span></span>
<span id="cb146-4"><a href="#cb146-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb146-5"><a href="#cb146-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Like <code>argfirst</code>, but unpacks elements as args to <code>f</code></em></p>
<p><a href="https://fastcore.fast.ai/foundation.html#l.starargfirst"><code>L.starargfirst</code></a> is like <code>argfirst</code>, but unpacks tuple elements as arguments to the predicate (and is curryable):</p>
<div id="d4044d5c" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb147"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a>test_eq(L((<span class="dv">3</span>,<span class="dv">1</span>),(<span class="dv">1</span>,<span class="dv">2</span>),(<span class="dv">2</span>,<span class="dv">3</span>)).starargfirst(lt), <span class="dv">1</span>)</span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a>test_eq(L((<span class="dv">1</span>,<span class="dv">2</span>),(<span class="dv">3</span>,<span class="dv">1</span>),(<span class="dv">2</span>,<span class="dv">3</span>)).starargfirst(lt, negate<span class="op">=</span><span class="va">True</span>), <span class="dv">1</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
</section>
<section id="rstarargfirst" class="level3">
<h3 class="anchored" data-anchor-id="rstarargfirst">rstarargfirst</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb148"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-2"><a href="#cb148-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> rstarargfirst(</span>
<span id="cb148-3"><a href="#cb148-3" aria-hidden="true" tabindex="-1"></a>    f, negate:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span></span>
<span id="cb148-4"><a href="#cb148-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb148-5"><a href="#cb148-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Like <code>starargfirst</code>, but reverse the order of args</em></p>
<p><a href="https://fastcore.fast.ai/foundation.html#l.rstarargfirst"><code>L.rstarargfirst</code></a> is like <code>starargfirst</code>, but reverses the order of unpacked arguments (and is curryable):</p>
<div id="8dd7abc2" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb149"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a>test_eq(L((<span class="dv">1</span>,<span class="dv">3</span>),(<span class="dv">2</span>,<span class="dv">1</span>),(<span class="dv">3</span>,<span class="dv">2</span>)).rstarargfirst(lt), <span class="dv">1</span>)  <span class="co"># 3&lt;1 fails, 1&lt;2</span></span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a>test_eq(L((<span class="dv">2</span>,<span class="dv">1</span>),(<span class="dv">1</span>,<span class="dv">3</span>),(<span class="dv">3</span>,<span class="dv">2</span>)).rstarargfirst(lt, negate<span class="op">=</span><span class="va">True</span>), <span class="dv">1</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L374" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="l.itemgot" class="level3">
<h3 class="anchored" data-anchor-id="l.itemgot">L.itemgot</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb150"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb150-2"><a href="#cb150-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> itemgot(</span>
<span id="cb150-3"><a href="#cb150-3" aria-hidden="true" tabindex="-1"></a>    idxs:VAR_POSITIONAL</span>
<span id="cb150-4"><a href="#cb150-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb150-5"><a href="#cb150-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Create new <a href="https://fastcore.fast.ai/foundation.html#l"><code>L</code></a> with item <code>idx</code> of all <code>items</code></em></p>
<div id="89a13d92" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb151"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> L([[<span class="st">'x'</span>, [<span class="dv">0</span>]], [<span class="st">'y'</span>, [<span class="dv">1</span>]], [<span class="st">'z'</span>, [<span class="dv">2</span>,<span class="dv">2</span>]]])</span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a>test_eq(t.itemgot(<span class="dv">1</span>), b)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L382" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="l.attrgot" class="level3">
<h3 class="anchored" data-anchor-id="l.attrgot">L.attrgot</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb152"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-2"><a href="#cb152-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> attrgot(</span>
<span id="cb152-3"><a href="#cb152-3" aria-hidden="true" tabindex="-1"></a>    k, default:NoneType<span class="op">=</span><span class="va">None</span></span>
<span id="cb152-4"><a href="#cb152-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb152-5"><a href="#cb152-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Create new <a href="https://fastcore.fast.ai/foundation.html#l"><code>L</code></a> with attr <code>k</code> (or value <code>k</code> for dicts) of all <code>items</code>.</em></p>
<div id="dad8526e" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb153"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example when items are not a dict</span></span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> [SimpleNamespace(a<span class="op">=</span><span class="dv">3</span>,b<span class="op">=</span><span class="dv">4</span>),SimpleNamespace(a<span class="op">=</span><span class="dv">1</span>,b<span class="op">=</span><span class="dv">2</span>)]</span>
<span id="cb153-3"><a href="#cb153-3" aria-hidden="true" tabindex="-1"></a>test_eq(L(a).attrgot(<span class="st">'b'</span>), [<span class="dv">4</span>,<span class="dv">2</span>])</span>
<span id="cb153-4"><a href="#cb153-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb153-5"><a href="#cb153-5" aria-hidden="true" tabindex="-1"></a><span class="co">#Example of when items are a dict</span></span>
<span id="cb153-6"><a href="#cb153-6" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span>[{<span class="st">'id'</span>: <span class="dv">15</span>, <span class="st">'name'</span>: <span class="st">'nbdev'</span>}, {<span class="st">'id'</span>: <span class="dv">17</span>, <span class="st">'name'</span>: <span class="st">'fastcore'</span>}]</span>
<span id="cb153-7"><a href="#cb153-7" aria-hidden="true" tabindex="-1"></a>test_eq(L(b).attrgot(<span class="st">'id'</span>), [<span class="dv">15</span>, <span class="dv">17</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
</section>
<section id="sorted" class="level3">
<h3 class="anchored" data-anchor-id="sorted">sorted</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb154"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb154-2"><a href="#cb154-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="bu">sorted</span>(</span>
<span id="cb154-3"><a href="#cb154-3" aria-hidden="true" tabindex="-1"></a>    key:NoneType<span class="op">=</span><span class="va">None</span>, reverse:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="bu">cmp</span>:NoneType<span class="op">=</span><span class="va">None</span>, kwargs:VAR_KEYWORD</span>
<span id="cb154-4"><a href="#cb154-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb154-5"><a href="#cb154-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>New <a href="https://fastcore.fast.ai/foundation.html#l"><code>L</code></a> sorted by <code>key</code>, using <code>sort_ex</code>. If key is str use <code>attrgetter</code>; if int use <code>itemgetter</code></em></p>
<div id="646cbc22" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb155"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a>test_eq(L(a).<span class="bu">sorted</span>(<span class="st">'a'</span>).attrgot(<span class="st">'b'</span>), [<span class="dv">2</span>,<span class="dv">4</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Curried <a href="https://fastcore.fast.ai/foundation.html#l.sorted"><code>L.sorted</code></a> returns a partial function that sorts any iterable by the given key. This is useful when mapping a sort operation over nested collections—each inner collection gets sorted independently using the same key.</p>
<div id="1ab61e1e" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb156"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a>nested <span class="op">=</span> L([[(<span class="dv">3</span>,<span class="st">'c'</span>),(<span class="dv">1</span>,<span class="st">'a'</span>),(<span class="dv">2</span>,<span class="st">'b'</span>)], [(<span class="dv">6</span>,<span class="st">'f'</span>),(<span class="dv">4</span>,<span class="st">'d'</span>)]])</span>
<span id="cb156-2"><a href="#cb156-2" aria-hidden="true" tabindex="-1"></a>nested.<span class="bu">map</span>(L.<span class="bu">sorted</span>(<span class="dv">0</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>[[(1, 'a'), (2, 'b'), (3, 'c')], [(4, 'd'), (6, 'f')]]</code></pre>
</div>
</div>
<hr>
</section>
<section id="starsorted" class="level3">
<h3 class="anchored" data-anchor-id="starsorted">starsorted</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb158"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-2"><a href="#cb158-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> starsorted(</span>
<span id="cb158-3"><a href="#cb158-3" aria-hidden="true" tabindex="-1"></a>    key, reverse:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span></span>
<span id="cb158-4"><a href="#cb158-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb158-5"><a href="#cb158-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Like <code>sorted</code>, but unpacks elements as args to <code>key</code></em></p>
<p><a href="https://fastcore.fast.ai/foundation.html#l.starsorted"><code>L.starsorted</code></a> is like <code>sorted</code>, but unpacks tuple elements as arguments to the key function:</p>
<div id="74a73a56" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb159"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a>test_eq(L((<span class="dv">3</span>,<span class="dv">1</span>),(<span class="dv">1</span>,<span class="dv">2</span>),(<span class="dv">2</span>,<span class="dv">0</span>)).starsorted(operator.sub), [(<span class="dv">1</span>,<span class="dv">2</span>),(<span class="dv">3</span>,<span class="dv">1</span>),(<span class="dv">2</span>,<span class="dv">0</span>)])  <span class="co"># sorted by a-b: 2, 2, -1</span></span>
<span id="cb159-2"><a href="#cb159-2" aria-hidden="true" tabindex="-1"></a>test_eq(L((<span class="dv">1</span>,<span class="dv">2</span>),(<span class="dv">3</span>,<span class="dv">1</span>),(<span class="dv">2</span>,<span class="dv">3</span>)).starsorted(operator.add), [(<span class="dv">1</span>,<span class="dv">2</span>),(<span class="dv">3</span>,<span class="dv">1</span>),(<span class="dv">2</span>,<span class="dv">3</span>)])  <span class="co"># sorted by a+b: 3, 4, 5</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
</section>
<section id="rstarsorted" class="level3">
<h3 class="anchored" data-anchor-id="rstarsorted">rstarsorted</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb160"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-2"><a href="#cb160-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> rstarsorted(</span>
<span id="cb160-3"><a href="#cb160-3" aria-hidden="true" tabindex="-1"></a>    key, reverse:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span></span>
<span id="cb160-4"><a href="#cb160-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb160-5"><a href="#cb160-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Like <code>starsorted</code>, but reverse the order of args</em></p>
<p><a href="https://fastcore.fast.ai/foundation.html#l.rstarsorted"><code>L.rstarsorted</code></a> is like <code>starsorted</code>, but reverses the order of unpacked arguments:</p>
<div id="7123a1a2" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb161"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a>test_eq(L((<span class="dv">1</span>,<span class="dv">3</span>),(<span class="dv">2</span>,<span class="dv">1</span>),(<span class="dv">0</span>,<span class="dv">2</span>)).rstarsorted(operator.sub), [(<span class="dv">2</span>,<span class="dv">1</span>),(<span class="dv">1</span>,<span class="dv">3</span>),(<span class="dv">0</span>,<span class="dv">2</span>)])  <span class="co"># sorted by b-a: 0, 2, 2</span></span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true" tabindex="-1"></a>test_eq(L((<span class="dv">2</span>,<span class="dv">1</span>),(<span class="dv">1</span>,<span class="dv">3</span>),(<span class="dv">3</span>,<span class="dv">2</span>)).rstarsorted(operator.sub), [(<span class="dv">2</span>,<span class="dv">1</span>),(<span class="dv">3</span>,<span class="dv">2</span>),(<span class="dv">1</span>,<span class="dv">3</span>)])  <span class="co"># sorted by b-a: -1, -1, 2</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L409" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="l.concat" class="level3">
<h3 class="anchored" data-anchor-id="l.concat">L.concat</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb162"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-2"><a href="#cb162-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> concat(</span>
<span id="cb162-3"><a href="#cb162-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb162-4"><a href="#cb162-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb162-5"><a href="#cb162-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Concatenate all elements of list</em></p>
<div id="6c74fb84" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb163"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a>test_eq(L([<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>],<span class="dv">4</span>,L(<span class="dv">5</span>,<span class="dv">6</span>)).concat(), <span class="bu">range</span>(<span class="dv">7</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L415" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="l.copy" class="level3">
<h3 class="anchored" data-anchor-id="l.copy">L.copy</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb164"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-2"><a href="#cb164-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> copy(</span>
<span id="cb164-3"><a href="#cb164-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb164-4"><a href="#cb164-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb164-5"><a href="#cb164-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Same as <code>list.copy</code>, but returns an <a href="https://fastcore.fast.ai/foundation.html#l"><code>L</code></a></em></p>
<div id="b4aaf8fa" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb165"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> L([<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>],<span class="dv">4</span>,L(<span class="dv">5</span>,<span class="dv">6</span>)).copy()</span>
<span id="cb165-2"><a href="#cb165-2" aria-hidden="true" tabindex="-1"></a>test_eq(t.concat(), <span class="bu">range</span>(<span class="dv">7</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L421" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="l.shuffle" class="level3">
<h3 class="anchored" data-anchor-id="l.shuffle">L.shuffle</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb166"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb166-2"><a href="#cb166-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> shuffle(</span>
<span id="cb166-3"><a href="#cb166-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb166-4"><a href="#cb166-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb166-5"><a href="#cb166-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Same as <code>random.shuffle</code>, but not inplace</em></p>
<p><a href="https://fastcore.fast.ai/foundation.html#l.shuffle"><code>L.shuffle</code></a> returns a new shuffled <a href="https://fastcore.fast.ai/foundation.html#l"><code>L</code></a>, leaving the original unchanged:</p>
<div id="3edd22b5" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb167"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> L(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>)</span>
<span id="cb167-2"><a href="#cb167-2" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> t.shuffle()</span>
<span id="cb167-3"><a href="#cb167-3" aria-hidden="true" tabindex="-1"></a>test_eq(<span class="bu">set</span>(s), <span class="bu">set</span>(t))  <span class="co"># same elements</span></span>
<span id="cb167-4"><a href="#cb167-4" aria-hidden="true" tabindex="-1"></a>test_eq(t, [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>])  <span class="co"># original unchanged</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
</section>
<section id="reduce" class="level3">
<h3 class="anchored" data-anchor-id="reduce">reduce</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb168"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-2"><a href="#cb168-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="bu">reduce</span>(</span>
<span id="cb168-3"><a href="#cb168-3" aria-hidden="true" tabindex="-1"></a>    f, initial:NoneType<span class="op">=</span><span class="va">None</span></span>
<span id="cb168-4"><a href="#cb168-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb168-5"><a href="#cb168-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Wrapper for <code>functools.reduce</code></em></p>
<div id="bd4184ca" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb169"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a>test_eq(L(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>).<span class="bu">reduce</span>(operator.add), <span class="dv">10</span>)</span>
<span id="cb169-2"><a href="#cb169-2" aria-hidden="true" tabindex="-1"></a>test_eq(L(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>).<span class="bu">reduce</span>(operator.mul, <span class="dv">10</span>), <span class="dv">240</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Curried <a href="https://fastcore.fast.ai/foundation.html#l.reduce"><code>L.reduce</code></a> returns a partial function that reduces any iterable using the given function. This is useful when mapping a reduction over nested collections—each inner collection gets reduced independently using the same operation.</p>
<div id="65b58b72" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb170"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a>nested <span class="op">=</span> L([[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>], [<span class="dv">4</span>,<span class="dv">5</span>], [<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>]])</span>
<span id="cb170-2"><a href="#cb170-2" aria-hidden="true" tabindex="-1"></a>nested.<span class="bu">map</span>(L.<span class="bu">reduce</span>(operator.add))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>[6, 9, 30]</code></pre>
</div>
</div>
<hr>
</section>
<section id="starreduce" class="level3">
<h3 class="anchored" data-anchor-id="starreduce">starreduce</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb172"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb172-2"><a href="#cb172-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> starreduce(</span>
<span id="cb172-3"><a href="#cb172-3" aria-hidden="true" tabindex="-1"></a>    f, initial:NoneType<span class="op">=</span><span class="va">None</span></span>
<span id="cb172-4"><a href="#cb172-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb172-5"><a href="#cb172-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Like <code>reduce</code>, but unpacks elements as args to <code>f</code></em></p>
<p><a href="https://fastcore.fast.ai/foundation.html#l.starreduce"><code>L.starreduce</code></a> is like <code>reduce</code>, but unpacks tuple elements as additional arguments to <code>f</code> (after accumulator):</p>
<div id="41fd24f2" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb173"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a>test_eq(L((<span class="dv">1</span>,<span class="dv">2</span>),(<span class="dv">3</span>,<span class="dv">4</span>),(<span class="dv">5</span>,<span class="dv">6</span>)).starreduce(<span class="kw">lambda</span> acc,a,b: acc<span class="op">+</span>a<span class="op">*</span>b, <span class="dv">0</span>), <span class="dv">44</span>)  <span class="co"># 0+1*2+3*4+5*6</span></span>
<span id="cb173-2"><a href="#cb173-2" aria-hidden="true" tabindex="-1"></a>test_eq(L((<span class="st">'a'</span>,<span class="dv">1</span>),(<span class="st">'b'</span>,<span class="dv">2</span>)).starreduce(<span class="kw">lambda</span> acc,k,v: {<span class="op">**</span>acc, k:v}, {}), {<span class="st">'a'</span>:<span class="dv">1</span>,<span class="st">'b'</span>:<span class="dv">2</span>})</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>E.g implement a dot product:</p>
<div id="dfe97eec" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb174"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> dot(a,b): <span class="cf">return</span> a.zipwith(b).starreduce(<span class="kw">lambda</span> acc,a,b: acc<span class="op">+</span>a<span class="op">*</span>b, <span class="dv">0</span>)</span>
<span id="cb174-2"><a href="#cb174-2" aria-hidden="true" tabindex="-1"></a>dot(L(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">5</span>), L(<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">6</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>44</code></pre>
</div>
</div>
<hr>
</section>
<section id="rstarreduce" class="level3">
<h3 class="anchored" data-anchor-id="rstarreduce">rstarreduce</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb176"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2"><a href="#cb176-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> rstarreduce(</span>
<span id="cb176-3"><a href="#cb176-3" aria-hidden="true" tabindex="-1"></a>    f, initial:NoneType<span class="op">=</span><span class="va">None</span></span>
<span id="cb176-4"><a href="#cb176-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb176-5"><a href="#cb176-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Like <code>starreduce</code>, but reverse the order of unpacked args</em></p>
<p><a href="https://fastcore.fast.ai/foundation.html#l.rstarreduce"><code>L.rstarreduce</code></a> is like <code>starreduce</code>, but reverses the order of unpacked arguments:</p>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L452" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="l.sum" class="level3">
<h3 class="anchored" data-anchor-id="l.sum">L.sum</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb177"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb177-2"><a href="#cb177-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="bu">sum</span>(</span>
<span id="cb177-3"><a href="#cb177-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb177-4"><a href="#cb177-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb177-5"><a href="#cb177-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Sum of the items</em></p>
<div id="18e6c336" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb178"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a>test_eq(L(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>).<span class="bu">sum</span>(), <span class="dv">10</span>)</span>
<span id="cb178-2"><a href="#cb178-2" aria-hidden="true" tabindex="-1"></a>test_eq(L().<span class="bu">sum</span>(), <span class="dv">0</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L458" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="l.product" class="level3">
<h3 class="anchored" data-anchor-id="l.product">L.product</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb179"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-2"><a href="#cb179-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> product(</span>
<span id="cb179-3"><a href="#cb179-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb179-4"><a href="#cb179-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb179-5"><a href="#cb179-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Product of the items</em></p>
<div id="a41eb5c0" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb180"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a>test_eq(L(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>).product(), <span class="dv">24</span>)</span>
<span id="cb180-2"><a href="#cb180-2" aria-hidden="true" tabindex="-1"></a>test_eq(L().product(), <span class="dv">1</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L464" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="l.map_first" class="level3">
<h3 class="anchored" data-anchor-id="l.map_first">L.map_first</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb181"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb181-2"><a href="#cb181-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> map_first(</span>
<span id="cb181-3"><a href="#cb181-3" aria-hidden="true" tabindex="-1"></a>    f:function<span class="op">=&lt;</span>function noop at <span class="bn">0x7f158aa50d60</span><span class="op">&gt;</span>, g:function<span class="op">=&lt;</span>function noop at <span class="bn">0x7f158aa50d60</span><span class="op">&gt;</span>, args:VAR_POSITIONAL,</span>
<span id="cb181-4"><a href="#cb181-4" aria-hidden="true" tabindex="-1"></a>    kwargs:VAR_KEYWORD</span>
<span id="cb181-5"><a href="#cb181-5" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb181-6"><a href="#cb181-6" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>First element of <code>map_filter</code></em></p>
<div id="6d29b6c6" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb182"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> L(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)</span>
<span id="cb182-2"><a href="#cb182-2" aria-hidden="true" tabindex="-1"></a>test_eq(t.map_first(<span class="kw">lambda</span> o:o<span class="op">*</span><span class="dv">2</span> <span class="cf">if</span> o<span class="op">&gt;</span><span class="dv">2</span> <span class="cf">else</span> <span class="va">None</span>), <span class="dv">6</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L470" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="l.setattrs" class="level3">
<h3 class="anchored" data-anchor-id="l.setattrs">L.setattrs</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb183"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb183-2"><a href="#cb183-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> setattrs(</span>
<span id="cb183-3"><a href="#cb183-3" aria-hidden="true" tabindex="-1"></a>    attr, val</span>
<span id="cb183-4"><a href="#cb183-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb183-5"><a href="#cb183-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Call <code>setattr</code> on all items</em></p>
<div id="ca54000c" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb184"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> L(SimpleNamespace(),SimpleNamespace())</span>
<span id="cb184-2"><a href="#cb184-2" aria-hidden="true" tabindex="-1"></a>t.setattrs(<span class="st">'foo'</span>, <span class="st">'bar'</span>)</span>
<span id="cb184-3"><a href="#cb184-3" aria-hidden="true" tabindex="-1"></a>test_eq(t.attrgot(<span class="st">'foo'</span>), [<span class="st">'bar'</span>,<span class="st">'bar'</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L476" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="l.flatmap" class="level3">
<h3 class="anchored" data-anchor-id="l.flatmap">L.flatmap</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb185"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-2"><a href="#cb185-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> flatmap(</span>
<span id="cb185-3"><a href="#cb185-3" aria-hidden="true" tabindex="-1"></a>    f</span>
<span id="cb185-4"><a href="#cb185-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb185-5"><a href="#cb185-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Apply f to each element and flatten the results into a single L.</em></p>
<p><a href="https://fastcore.fast.ai/foundation.html#l.flatmap"><code>L.flatmap</code></a> is the method version of the <a href="https://fastcore.fast.ai/foundation.html#flatmap"><code>flatmap</code></a> function, allowing you to call it directly on an <a href="https://fastcore.fast.ai/foundation.html#l"><code>L</code></a> instance. It applies a function to each element and flattens the results into a single <a href="https://fastcore.fast.ai/foundation.html#l"><code>L</code></a>. This is useful for operations where each input naturally produces zero, one, or many outputs.</p>
<div id="7f23af48" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb186"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a>test_eq(L(<span class="st">"a,b,c"</span>, <span class="st">"d,e"</span>).flatmap(Self.split(<span class="st">','</span>)), [<span class="st">'a'</span>, <span class="st">'b'</span>, <span class="st">'c'</span>, <span class="st">'d'</span>, <span class="st">'e'</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>As an alternative, you can just chain <code>map</code> and <a href="https://fastcore.fast.ai/basics.html#concat"><code>concat</code></a>:</p>
<div id="98639cc7" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb187"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a>L(<span class="st">"a,b,c"</span>, <span class="st">"d,e"</span>).<span class="bu">map</span>(Self.split(<span class="st">','</span>)).concat()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>['a', 'b', 'c', 'd', 'e']</code></pre>
</div>
</div>
</section>
<section id="itertools-wrappers" class="level3">
<h3 class="anchored" data-anchor-id="itertools-wrappers">itertools wrappers</h3>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L482" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="l.cycle" class="level3">
<h3 class="anchored" data-anchor-id="l.cycle">L.cycle</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb189"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb189-2"><a href="#cb189-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> cycle(</span>
<span id="cb189-3"><a href="#cb189-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb189-4"><a href="#cb189-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb189-5"><a href="#cb189-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Same as <code>itertools.cycle</code></em></p>
<p><a href="https://fastcore.fast.ai/foundation.html#l.cycle"><code>L.cycle</code></a> returns an infinite iterator that cycles through the elements:</p>
<div id="816b9e9c" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb190"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a>test_eq(<span class="bu">list</span>(itertools.islice(L(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>).cycle(), <span class="dv">7</span>)), [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">1</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
</section>
<section id="takewhile" class="level3">
<h3 class="anchored" data-anchor-id="takewhile">takewhile</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb191"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb191-2"><a href="#cb191-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> takewhile(</span>
<span id="cb191-3"><a href="#cb191-3" aria-hidden="true" tabindex="-1"></a>    f</span>
<span id="cb191-4"><a href="#cb191-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb191-5"><a href="#cb191-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Same as <code>itertools.takewhile</code></em></p>
<p><a href="https://fastcore.fast.ai/foundation.html#l.takewhile"><code>L.takewhile</code></a> returns elements from the beginning of the list while the predicate is true:</p>
<div id="6b80039c" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb192"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a>test_eq(L(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">1</span>,<span class="dv">2</span>).takewhile(<span class="kw">lambda</span> x: x<span class="op">&lt;</span><span class="dv">4</span>), [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>])</span>
<span id="cb192-2"><a href="#cb192-2" aria-hidden="true" tabindex="-1"></a>test_eq(L(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">11</span>).takewhile(lt(<span class="dv">10</span>)), [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Curried <a href="https://fastcore.fast.ai/foundation.html#l.takewhile"><code>L.takewhile</code></a> returns a partial function that takes elements from the beginning of any iterable while the predicate holds. This is useful when mapping over nested collections—each inner collection gets truncated at the first failing element using the same predicate.</p>
<div id="da17275d" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb193"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a>nested <span class="op">=</span> L([[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">3</span>], [<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">8</span>,<span class="dv">1</span>], [<span class="dv">9</span>,<span class="dv">1</span>,<span class="dv">2</span>]])</span>
<span id="cb193-2"><a href="#cb193-2" aria-hidden="true" tabindex="-1"></a>nested.<span class="bu">map</span>(L.takewhile(lt(<span class="dv">5</span>)))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>[[1, 2], [2, 3], []]</code></pre>
</div>
</div>
<hr>
</section>
<section id="dropwhile" class="level3">
<h3 class="anchored" data-anchor-id="dropwhile">dropwhile</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb195"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb195-2"><a href="#cb195-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> dropwhile(</span>
<span id="cb195-3"><a href="#cb195-3" aria-hidden="true" tabindex="-1"></a>    f</span>
<span id="cb195-4"><a href="#cb195-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb195-5"><a href="#cb195-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Same as <code>itertools.dropwhile</code></em></p>
<p><a href="https://fastcore.fast.ai/foundation.html#l.dropwhile"><code>L.dropwhile</code></a> skips elements from the beginning while the predicate is true, then returns the rest:</p>
<div id="086eec4a" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb196"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a>test_eq(L(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">1</span>,<span class="dv">2</span>).dropwhile(lt(<span class="dv">4</span>)), [<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">1</span>,<span class="dv">2</span>])</span>
<span id="cb196-2"><a href="#cb196-2" aria-hidden="true" tabindex="-1"></a>test_eq(L(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>).dropwhile(lt(<span class="dv">10</span>)), [])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
</section>
<section id="startakewhile" class="level3">
<h3 class="anchored" data-anchor-id="startakewhile">startakewhile</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb197"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb197-2"><a href="#cb197-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> startakewhile(</span>
<span id="cb197-3"><a href="#cb197-3" aria-hidden="true" tabindex="-1"></a>    f</span>
<span id="cb197-4"><a href="#cb197-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb197-5"><a href="#cb197-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Like <code>takewhile</code>, but unpacks elements as args to <code>f</code></em></p>
<p><a href="https://fastcore.fast.ai/foundation.html#l.startakewhile"><code>L.startakewhile</code></a> is like <code>takewhile</code>, but unpacks tuple elements as arguments to the predicate:</p>
<div id="14007659" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb198"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a>test_eq(L((<span class="dv">1</span>,<span class="dv">2</span>),(<span class="dv">2</span>,<span class="dv">3</span>),(<span class="dv">4</span>,<span class="dv">1</span>),(<span class="dv">5</span>,<span class="dv">6</span>)).startakewhile(<span class="kw">lambda</span> a,b: a<span class="op">&lt;</span>b), [(<span class="dv">1</span>,<span class="dv">2</span>),(<span class="dv">2</span>,<span class="dv">3</span>)])</span>
<span id="cb198-2"><a href="#cb198-2" aria-hidden="true" tabindex="-1"></a>test_eq(L((<span class="dv">1</span>,<span class="dv">10</span>),(<span class="dv">2</span>,<span class="dv">20</span>),(<span class="dv">5</span>,<span class="dv">3</span>)).startakewhile(lt), [(<span class="dv">1</span>,<span class="dv">10</span>),(<span class="dv">2</span>,<span class="dv">20</span>)])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="83fa9180" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb199"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb199-1"><a href="#cb199-1" aria-hidden="true" tabindex="-1"></a>nested <span class="op">=</span> L([[(<span class="dv">1</span>,<span class="dv">5</span>),(<span class="dv">2</span>,<span class="dv">6</span>),(<span class="dv">7</span>,<span class="dv">3</span>)], [(<span class="dv">0</span>,<span class="dv">1</span>),(<span class="dv">2</span>,<span class="dv">1</span>),(<span class="dv">3</span>,<span class="dv">9</span>)]])</span>
<span id="cb199-2"><a href="#cb199-2" aria-hidden="true" tabindex="-1"></a>nested.<span class="bu">map</span>(L.startakewhile(lt))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>[[(1, 5), (2, 6)], [(0, 1)]]</code></pre>
</div>
</div>
<hr>
</section>
<section id="rstartakewhile" class="level3">
<h3 class="anchored" data-anchor-id="rstartakewhile">rstartakewhile</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb201"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb201-1"><a href="#cb201-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb201-2"><a href="#cb201-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> rstartakewhile(</span>
<span id="cb201-3"><a href="#cb201-3" aria-hidden="true" tabindex="-1"></a>    f</span>
<span id="cb201-4"><a href="#cb201-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb201-5"><a href="#cb201-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Like <code>startakewhile</code>, but reverse the order of args</em></p>
<p><a href="https://fastcore.fast.ai/foundation.html#l.rstartakewhile"><code>L.rstartakewhile</code></a> is like <code>startakewhile</code>, but reverses the order of unpacked arguments:</p>
<div id="88467916" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb202"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb202-1"><a href="#cb202-1" aria-hidden="true" tabindex="-1"></a>test_eq(L((<span class="dv">2</span>,<span class="dv">1</span>),(<span class="dv">3</span>,<span class="dv">2</span>),(<span class="dv">1</span>,<span class="dv">4</span>),(<span class="dv">6</span>,<span class="dv">5</span>)).rstartakewhile(lt), [(<span class="dv">2</span>,<span class="dv">1</span>),(<span class="dv">3</span>,<span class="dv">2</span>)])  <span class="co"># 1&lt;2, 2&lt;3, 4&lt;1 fails</span></span>
<span id="cb202-2"><a href="#cb202-2" aria-hidden="true" tabindex="-1"></a>test_eq(L((<span class="dv">10</span>,<span class="dv">1</span>),(<span class="dv">20</span>,<span class="dv">2</span>),(<span class="dv">3</span>,<span class="dv">5</span>)).rstartakewhile(lt), [(<span class="dv">10</span>,<span class="dv">1</span>),(<span class="dv">20</span>,<span class="dv">2</span>)])  <span class="co"># 1&lt;10, 2&lt;20, 5&lt;3 fails</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
</section>
<section id="stardropwhile" class="level3">
<h3 class="anchored" data-anchor-id="stardropwhile">stardropwhile</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb203"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb203-1"><a href="#cb203-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-2"><a href="#cb203-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> stardropwhile(</span>
<span id="cb203-3"><a href="#cb203-3" aria-hidden="true" tabindex="-1"></a>    f</span>
<span id="cb203-4"><a href="#cb203-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb203-5"><a href="#cb203-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Like <code>dropwhile</code>, but unpacks elements as args to <code>f</code></em></p>
<p><a href="https://fastcore.fast.ai/foundation.html#l.stardropwhile"><code>L.stardropwhile</code></a> is like <code>dropwhile</code>, but unpacks tuple elements as arguments to the predicate:</p>
<div id="1c611ab3" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb204"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb204-1"><a href="#cb204-1" aria-hidden="true" tabindex="-1"></a>test_eq(L((<span class="dv">1</span>,<span class="dv">2</span>),(<span class="dv">2</span>,<span class="dv">3</span>),(<span class="dv">4</span>,<span class="dv">1</span>),(<span class="dv">5</span>,<span class="dv">6</span>)).stardropwhile(<span class="kw">lambda</span> a,b: a<span class="op">&lt;</span>b), [(<span class="dv">4</span>,<span class="dv">1</span>),(<span class="dv">5</span>,<span class="dv">6</span>)])</span>
<span id="cb204-2"><a href="#cb204-2" aria-hidden="true" tabindex="-1"></a>test_eq(L((<span class="dv">1</span>,<span class="dv">10</span>),(<span class="dv">2</span>,<span class="dv">20</span>),(<span class="dv">5</span>,<span class="dv">3</span>)).stardropwhile(lt), [(<span class="dv">5</span>,<span class="dv">3</span>)])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
</section>
<section id="rstardropwhile" class="level3">
<h3 class="anchored" data-anchor-id="rstardropwhile">rstardropwhile</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb205"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb205-1"><a href="#cb205-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb205-2"><a href="#cb205-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> rstardropwhile(</span>
<span id="cb205-3"><a href="#cb205-3" aria-hidden="true" tabindex="-1"></a>    f</span>
<span id="cb205-4"><a href="#cb205-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb205-5"><a href="#cb205-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Like <code>stardropwhile</code>, but reverse the order of args</em></p>
<p><a href="https://fastcore.fast.ai/foundation.html#l.rstardropwhile"><code>L.rstardropwhile</code></a> is like <code>stardropwhile</code>, but reverses the order of unpacked arguments:</p>
<div id="17ef03a4" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb206"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb206-1"><a href="#cb206-1" aria-hidden="true" tabindex="-1"></a>test_eq(L((<span class="dv">2</span>,<span class="dv">1</span>),(<span class="dv">3</span>,<span class="dv">2</span>),(<span class="dv">1</span>,<span class="dv">4</span>),(<span class="dv">6</span>,<span class="dv">5</span>)).rstardropwhile(lt), [(<span class="dv">1</span>,<span class="dv">4</span>),(<span class="dv">6</span>,<span class="dv">5</span>)])  <span class="co"># 1&lt;2, 2&lt;3 pass, 4&lt;1 fails</span></span>
<span id="cb206-2"><a href="#cb206-2" aria-hidden="true" tabindex="-1"></a>test_eq(L((<span class="dv">10</span>,<span class="dv">1</span>),(<span class="dv">20</span>,<span class="dv">2</span>),(<span class="dv">3</span>,<span class="dv">5</span>)).rstardropwhile(lt), [(<span class="dv">3</span>,<span class="dv">5</span>)])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
</section>
<section id="accumulate" class="level3">
<h3 class="anchored" data-anchor-id="accumulate">accumulate</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb207"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb207-1"><a href="#cb207-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-2"><a href="#cb207-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> accumulate(</span>
<span id="cb207-3"><a href="#cb207-3" aria-hidden="true" tabindex="-1"></a>    f:builtin_function_or_method<span class="op">=&lt;</span>built<span class="op">-</span><span class="kw">in</span> function add<span class="op">&gt;</span>, initial:NoneType<span class="op">=</span><span class="va">None</span></span>
<span id="cb207-4"><a href="#cb207-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb207-5"><a href="#cb207-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Same as <code>itertools.accumulate</code></em></p>
<p><a href="https://fastcore.fast.ai/foundation.html#l.accumulate"><code>L.accumulate</code></a> returns running totals (or running results of any binary function):</p>
<div id="848d116e" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb208"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb208-1"><a href="#cb208-1" aria-hidden="true" tabindex="-1"></a>test_eq(L(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>).accumulate(), [<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">6</span>,<span class="dv">10</span>])</span>
<span id="cb208-2"><a href="#cb208-2" aria-hidden="true" tabindex="-1"></a>test_eq(L(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>).accumulate(operator.mul), [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">6</span>,<span class="dv">24</span>])</span>
<span id="cb208-3"><a href="#cb208-3" aria-hidden="true" tabindex="-1"></a>test_eq(L(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>).accumulate(initial<span class="op">=</span><span class="dv">10</span>), [<span class="dv">10</span>,<span class="dv">11</span>,<span class="dv">13</span>,<span class="dv">16</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Curried <a href="https://fastcore.fast.ai/foundation.html#l.accumulate"><code>L.accumulate</code></a> returns a partial function that computes running totals (or running results of any binary function) on any iterable. This is useful when mapping over nested collections—each inner collection gets its own running accumulation using the same function.</p>
<div id="2f2be97f" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb209"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb209-1"><a href="#cb209-1" aria-hidden="true" tabindex="-1"></a>nested <span class="op">=</span> L([[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>], [<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>], [<span class="dv">10</span>,<span class="dv">20</span>]])</span>
<span id="cb209-2"><a href="#cb209-2" aria-hidden="true" tabindex="-1"></a>nested.<span class="bu">map</span>(L.accumulate(operator.mul))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>[[1, 2, 6], [4, 20, 120], [10, 200]]</code></pre>
</div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L537" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="l.pairwise" class="level3">
<h3 class="anchored" data-anchor-id="l.pairwise">L.pairwise</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb211"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb211-1"><a href="#cb211-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-2"><a href="#cb211-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> pairwise(</span>
<span id="cb211-3"><a href="#cb211-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb211-4"><a href="#cb211-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb211-5"><a href="#cb211-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Same as <code>itertools.pairwise</code></em></p>
<p><a href="https://fastcore.fast.ai/foundation.html#l.pairwise"><code>L.pairwise</code></a> returns consecutive overlapping pairs:</p>
<div id="d289d7cb" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb212"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb212-1"><a href="#cb212-1" aria-hidden="true" tabindex="-1"></a>test_eq(L(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>).pairwise(), [(<span class="dv">1</span>,<span class="dv">2</span>),(<span class="dv">2</span>,<span class="dv">3</span>),(<span class="dv">3</span>,<span class="dv">4</span>)])</span>
<span id="cb212-2"><a href="#cb212-2" aria-hidden="true" tabindex="-1"></a>test_eq(L(<span class="bu">list</span>(<span class="st">'abcd'</span>)).pairwise(), [(<span class="st">'a'</span>,<span class="st">'b'</span>),(<span class="st">'b'</span>,<span class="st">'c'</span>),(<span class="st">'c'</span>,<span class="st">'d'</span>)])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L555" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="l.batched" class="level3">
<h3 class="anchored" data-anchor-id="l.batched">L.batched</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb213"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb213-1"><a href="#cb213-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb213-2"><a href="#cb213-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> batched(</span>
<span id="cb213-3"><a href="#cb213-3" aria-hidden="true" tabindex="-1"></a>    n</span>
<span id="cb213-4"><a href="#cb213-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb213-5"><a href="#cb213-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Same as <code>itertools.batched</code> (but also works on older Python versions</em></p>
<p><a href="https://fastcore.fast.ai/foundation.html#l.batched"><code>L.batched</code></a> splits into chunks of size <code>n</code>:</p>
<div id="f890dfb1" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb214"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb214-1"><a href="#cb214-1" aria-hidden="true" tabindex="-1"></a>test_eq(L(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>).batched(<span class="dv">2</span>), [(<span class="dv">1</span>,<span class="dv">2</span>),(<span class="dv">3</span>,<span class="dv">4</span>),(<span class="dv">5</span>,)])</span>
<span id="cb214-2"><a href="#cb214-2" aria-hidden="true" tabindex="-1"></a>test_eq(L(<span class="bu">list</span>(<span class="st">'abcdefg'</span>)).batched(<span class="dv">3</span>), [(<span class="st">'a'</span>,<span class="st">'b'</span>,<span class="st">'c'</span>),(<span class="st">'d'</span>,<span class="st">'e'</span>,<span class="st">'f'</span>),(<span class="st">'g'</span>,)])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L561" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="l.compress" class="level3">
<h3 class="anchored" data-anchor-id="l.compress">L.compress</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb215"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb215-1"><a href="#cb215-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb215-2"><a href="#cb215-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> compress(</span>
<span id="cb215-3"><a href="#cb215-3" aria-hidden="true" tabindex="-1"></a>    selectors</span>
<span id="cb215-4"><a href="#cb215-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb215-5"><a href="#cb215-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Same as <code>itertools.compress</code></em></p>
<p><a href="https://fastcore.fast.ai/foundation.html#l.compress"><code>L.compress</code></a> filters elements using a boolean selector:</p>
<div id="9fc0aeb9" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb216"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb216-1"><a href="#cb216-1" aria-hidden="true" tabindex="-1"></a>test_eq(L(<span class="bu">list</span>(<span class="st">'abcd'</span>)).compress([<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>]), [<span class="st">'a'</span>,<span class="st">'c'</span>])</span>
<span id="cb216-2"><a href="#cb216-2" aria-hidden="true" tabindex="-1"></a>test_eq(L(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>).compress([<span class="va">True</span>,<span class="va">False</span>,<span class="va">True</span>,<span class="va">False</span>,<span class="va">True</span>]), [<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">5</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L567" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="l.permutations" class="level3">
<h3 class="anchored" data-anchor-id="l.permutations">L.permutations</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb217"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb217-1"><a href="#cb217-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-2"><a href="#cb217-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> permutations(</span>
<span id="cb217-3"><a href="#cb217-3" aria-hidden="true" tabindex="-1"></a>    r:NoneType<span class="op">=</span><span class="va">None</span></span>
<span id="cb217-4"><a href="#cb217-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb217-5"><a href="#cb217-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Same as <code>itertools.permutations</code></em></p>
<p><a href="https://fastcore.fast.ai/foundation.html#l.permutations"><code>L.permutations</code></a> returns all permutations of length <code>r</code> (defaults to full length):</p>
<div id="9af6fa5e" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb218"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb218-1"><a href="#cb218-1" aria-hidden="true" tabindex="-1"></a>test_eq(L(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>).permutations(), [(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>),(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">2</span>),(<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">3</span>),(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">1</span>),(<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">2</span>),(<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">1</span>)])</span>
<span id="cb218-2"><a href="#cb218-2" aria-hidden="true" tabindex="-1"></a>test_eq(L(<span class="bu">list</span>(<span class="st">'abc'</span>)).permutations(<span class="dv">2</span>), [(<span class="st">'a'</span>,<span class="st">'b'</span>),(<span class="st">'a'</span>,<span class="st">'c'</span>),(<span class="st">'b'</span>,<span class="st">'a'</span>),(<span class="st">'b'</span>,<span class="st">'c'</span>),(<span class="st">'c'</span>,<span class="st">'a'</span>),(<span class="st">'c'</span>,<span class="st">'b'</span>)])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L573" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="l.combinations" class="level3">
<h3 class="anchored" data-anchor-id="l.combinations">L.combinations</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb219"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb219-1"><a href="#cb219-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb219-2"><a href="#cb219-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> combinations(</span>
<span id="cb219-3"><a href="#cb219-3" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb219-4"><a href="#cb219-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb219-5"><a href="#cb219-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Same as <code>itertools.combinations</code></em></p>
<p><a href="https://fastcore.fast.ai/foundation.html#l.combinations"><code>L.combinations</code></a> returns all combinations of length <code>r</code>:</p>
<div id="6d3bd5bf" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb220"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb220-1"><a href="#cb220-1" aria-hidden="true" tabindex="-1"></a>test_eq(L(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>).combinations(<span class="dv">2</span>), [(<span class="dv">1</span>,<span class="dv">2</span>),(<span class="dv">1</span>,<span class="dv">3</span>),(<span class="dv">1</span>,<span class="dv">4</span>),(<span class="dv">2</span>,<span class="dv">3</span>),(<span class="dv">2</span>,<span class="dv">4</span>),(<span class="dv">3</span>,<span class="dv">4</span>)])</span>
<span id="cb220-2"><a href="#cb220-2" aria-hidden="true" tabindex="-1"></a>test_eq(L(<span class="bu">list</span>(<span class="st">'abcd'</span>)).combinations(<span class="dv">3</span>), [(<span class="st">'a'</span>,<span class="st">'b'</span>,<span class="st">'c'</span>),(<span class="st">'a'</span>,<span class="st">'b'</span>,<span class="st">'d'</span>),(<span class="st">'a'</span>,<span class="st">'c'</span>,<span class="st">'d'</span>),(<span class="st">'b'</span>,<span class="st">'c'</span>,<span class="st">'d'</span>)])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/basics.py#L586" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="partition" class="level3">
<h3 class="anchored" data-anchor-id="partition">partition</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb221"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb221-1"><a href="#cb221-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb221-2"><a href="#cb221-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> partition(</span>
<span id="cb221-3"><a href="#cb221-3" aria-hidden="true" tabindex="-1"></a>    f:function<span class="op">=&lt;</span>function noop at <span class="bn">0x7f158aa50d60</span><span class="op">&gt;</span>, kwargs:VAR_KEYWORD</span>
<span id="cb221-4"><a href="#cb221-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb221-5"><a href="#cb221-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Split into two <a href="https://fastcore.fast.ai/foundation.html#l"><code>L</code></a>s based on predicate <code>f</code>: (true_items, false_items)</em></p>
<p><a href="https://fastcore.fast.ai/foundation.html#l.partition"><code>L.partition</code></a> splits a list into two <a href="https://fastcore.fast.ai/foundation.html#l"><code>L</code></a>s based on a predicate—items where <code>f</code> returns true, and items where it returns false:</p>
<div id="3ccae0ec" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb222"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb222-1"><a href="#cb222-1" aria-hidden="true" tabindex="-1"></a>t,f <span class="op">=</span> L(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>).partition(<span class="kw">lambda</span> x: x<span class="op">%</span><span class="dv">2</span><span class="op">==</span><span class="dv">0</span>)</span>
<span id="cb222-2"><a href="#cb222-2" aria-hidden="true" tabindex="-1"></a>test_eq(t, [<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">6</span>])</span>
<span id="cb222-3"><a href="#cb222-3" aria-hidden="true" tabindex="-1"></a>test_eq(f, [<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">5</span>])</span>
<span id="cb222-4"><a href="#cb222-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb222-5"><a href="#cb222-5" aria-hidden="true" tabindex="-1"></a>evens,odds <span class="op">=</span> L.<span class="bu">range</span>(<span class="dv">10</span>).partition(<span class="kw">lambda</span> x: x<span class="op">%</span><span class="dv">2</span><span class="op">==</span><span class="dv">0</span>)</span>
<span id="cb222-6"><a href="#cb222-6" aria-hidden="true" tabindex="-1"></a>test_eq(evens, [<span class="dv">0</span>,<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">6</span>,<span class="dv">8</span>])</span>
<span id="cb222-7"><a href="#cb222-7" aria-hidden="true" tabindex="-1"></a>test_eq(odds, [<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">5</span>,<span class="dv">7</span>,<span class="dv">9</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Curried <a href="https://fastcore.fast.ai/foundation.html#l.partition"><code>L.partition</code></a> returns a partial function that splits any iterable into two <a href="https://fastcore.fast.ai/foundation.html#l"><code>L</code></a>s based on a predicate. This is useful when mapping over nested collections—each inner collection gets partitioned independently using the same predicate, returning a tuple of (true_items, false_items) for each.</p>
<div id="56844860" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb223"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb223-1"><a href="#cb223-1" aria-hidden="true" tabindex="-1"></a>nested <span class="op">=</span> L([[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>], [<span class="dv">10</span>,<span class="dv">15</span>,<span class="dv">20</span>,<span class="dv">25</span>], [<span class="dv">3</span>,<span class="dv">6</span>,<span class="dv">9</span>]])</span>
<span id="cb223-2"><a href="#cb223-2" aria-hidden="true" tabindex="-1"></a>nested.<span class="bu">map</span>(L.partition(gt(<span class="dv">5</span>)))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>[([], [1, 2, 3, 4, 5]), ([10, 15, 20, 25], []), ([6, 9], [3])]</code></pre>
</div>
</div>
<hr>
</section>
<section id="starpartition" class="level3">
<h3 class="anchored" data-anchor-id="starpartition">starpartition</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb225"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb225-1"><a href="#cb225-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb225-2"><a href="#cb225-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> starpartition(</span>
<span id="cb225-3"><a href="#cb225-3" aria-hidden="true" tabindex="-1"></a>    f, kwargs:VAR_KEYWORD</span>
<span id="cb225-4"><a href="#cb225-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb225-5"><a href="#cb225-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Like <a href="https://fastcore.fast.ai/basics.html#partition"><code>partition</code></a>, but unpacks elements as args to <code>f</code></em></p>
<p><a href="https://fastcore.fast.ai/foundation.html#l.starpartition"><code>L.starpartition</code></a> is like <a href="https://fastcore.fast.ai/basics.html#partition"><code>partition</code></a>, but unpacks tuple elements as arguments to the predicate:</p>
<div id="e1b9f7f6" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb226"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb226-1"><a href="#cb226-1" aria-hidden="true" tabindex="-1"></a>asc,desc <span class="op">=</span> L((<span class="dv">1</span>,<span class="dv">2</span>),(<span class="dv">3</span>,<span class="dv">1</span>),(<span class="dv">2</span>,<span class="dv">4</span>),(<span class="dv">5</span>,<span class="dv">3</span>)).starpartition(lt)</span>
<span id="cb226-2"><a href="#cb226-2" aria-hidden="true" tabindex="-1"></a>test_eq(asc, [(<span class="dv">1</span>,<span class="dv">2</span>),(<span class="dv">2</span>,<span class="dv">4</span>)])   <span class="co"># a &lt; b</span></span>
<span id="cb226-3"><a href="#cb226-3" aria-hidden="true" tabindex="-1"></a>test_eq(desc, [(<span class="dv">3</span>,<span class="dv">1</span>),(<span class="dv">5</span>,<span class="dv">3</span>)])  <span class="co"># a &gt;= b</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
</section>
<section id="rstarpartition" class="level3">
<h3 class="anchored" data-anchor-id="rstarpartition">rstarpartition</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb227"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb227-1"><a href="#cb227-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb227-2"><a href="#cb227-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> rstarpartition(</span>
<span id="cb227-3"><a href="#cb227-3" aria-hidden="true" tabindex="-1"></a>    f, kwargs:VAR_KEYWORD</span>
<span id="cb227-4"><a href="#cb227-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb227-5"><a href="#cb227-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Like <code>starpartition</code>, but reverse the order of args</em></p>
<p><a href="https://fastcore.fast.ai/foundation.html#l.rstarpartition"><code>L.rstarpartition</code></a> is like <code>starpartition</code>, but reverses the order of unpacked arguments:</p>
<div id="58127227" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb228"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb228-1"><a href="#cb228-1" aria-hidden="true" tabindex="-1"></a>asc,desc <span class="op">=</span> L((<span class="dv">2</span>,<span class="dv">1</span>),(<span class="dv">1</span>,<span class="dv">3</span>),(<span class="dv">4</span>,<span class="dv">2</span>),(<span class="dv">3</span>,<span class="dv">5</span>)).rstarpartition(lt)</span>
<span id="cb228-2"><a href="#cb228-2" aria-hidden="true" tabindex="-1"></a>test_eq(asc, [(<span class="dv">2</span>,<span class="dv">1</span>),(<span class="dv">4</span>,<span class="dv">2</span>)])   <span class="co"># b &lt; a (i.e., 1&lt;2, 2&lt;4)</span></span>
<span id="cb228-3"><a href="#cb228-3" aria-hidden="true" tabindex="-1"></a>test_eq(desc, [(<span class="dv">1</span>,<span class="dv">3</span>),(<span class="dv">3</span>,<span class="dv">5</span>)])  <span class="co"># b &gt;= a</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L606" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="l.flatten" class="level3">
<h3 class="anchored" data-anchor-id="l.flatten">L.flatten</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb229"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb229-1"><a href="#cb229-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-2"><a href="#cb229-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> flatten(</span>
<span id="cb229-3"><a href="#cb229-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb229-4"><a href="#cb229-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb229-5"><a href="#cb229-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Recursively flatten nested iterables (except strings)</em></p>
<p><a href="https://fastcore.fast.ai/foundation.html#l.flatten"><code>L.flatten</code></a> recursively flattens nested iterables into a single <a href="https://fastcore.fast.ai/foundation.html#l"><code>L</code></a>. Strings are treated as atomic (not iterated over):</p>
<div id="a5f233d2" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb230"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb230-1"><a href="#cb230-1" aria-hidden="true" tabindex="-1"></a>test_eq(L([[<span class="dv">1</span>,<span class="dv">2</span>],[<span class="dv">3</span>,[<span class="dv">4</span>,<span class="dv">5</span>]]]).flatten(), [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>])</span>
<span id="cb230-2"><a href="#cb230-2" aria-hidden="true" tabindex="-1"></a>test_eq(L([<span class="dv">1</span>,[<span class="dv">2</span>,[<span class="dv">3</span>,[<span class="dv">4</span>]]]]).flatten(), [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>])</span>
<span id="cb230-3"><a href="#cb230-3" aria-hidden="true" tabindex="-1"></a>test_eq(L([<span class="st">'a'</span>,[<span class="st">'b'</span>,<span class="st">'c'</span>],<span class="st">'d'</span>]).flatten(), [<span class="st">'a'</span>,<span class="st">'b'</span>,<span class="st">'c'</span>,<span class="st">'d'</span>])  <span class="co"># strings not flattened</span></span>
<span id="cb230-4"><a href="#cb230-4" aria-hidden="true" tabindex="-1"></a>test_eq(L([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]).flatten(), [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>])  <span class="co"># already flat</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
</section>
<section id="config" class="level2">
<h2 class="anchored" data-anchor-id="config">Config</h2>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L615" target="_blank" style="float:right; font-size:smaller">source</a></p>
<section id="save_config_file" class="level3">
<h3 class="anchored" data-anchor-id="save_config_file">save_config_file</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb231"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb231-1"><a href="#cb231-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-2"><a href="#cb231-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> save_config_file(</span>
<span id="cb231-3"><a href="#cb231-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">file</span>, d, kwargs:VAR_KEYWORD</span>
<span id="cb231-4"><a href="#cb231-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb231-5"><a href="#cb231-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Write settings dict to a new config file, or overwrite the existing one.</em></p>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L622" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="read_config_file" class="level3">
<h3 class="anchored" data-anchor-id="read_config_file">read_config_file</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb232"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb232-1"><a href="#cb232-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb232-2"><a href="#cb232-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> read_config_file(</span>
<span id="cb232-3"><a href="#cb232-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">file</span>, kwargs:VAR_KEYWORD</span>
<span id="cb232-4"><a href="#cb232-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb232-5"><a href="#cb232-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Config files are saved and read using Python’s <code>configparser.ConfigParser</code>, inside the <code>DEFAULT</code> section.</p>
<div id="964cf19a" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb233"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb233-1"><a href="#cb233-1" aria-hidden="true" tabindex="-1"></a>_d <span class="op">=</span> <span class="bu">dict</span>(user<span class="op">=</span><span class="st">'fastai'</span>, lib_name<span class="op">=</span><span class="st">'fastcore'</span>, some_path<span class="op">=</span><span class="st">'test'</span>, some_bool<span class="op">=</span><span class="va">True</span>, some_num<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb233-2"><a href="#cb233-2" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>:</span>
<span id="cb233-3"><a href="#cb233-3" aria-hidden="true" tabindex="-1"></a>    save_config_file(<span class="st">'tmp.ini'</span>, _d)</span>
<span id="cb233-4"><a href="#cb233-4" aria-hidden="true" tabindex="-1"></a>    res <span class="op">=</span> read_config_file(<span class="st">'tmp.ini'</span>)</span>
<span id="cb233-5"><a href="#cb233-5" aria-hidden="true" tabindex="-1"></a><span class="cf">finally</span>: os.unlink(<span class="st">'tmp.ini'</span>)</span>
<span id="cb233-6"><a href="#cb233-6" aria-hidden="true" tabindex="-1"></a><span class="bu">dict</span>(res)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>{'user': 'fastai',
 'lib_name': 'fastcore',
 'some_path': 'test',
 'some_bool': 'True',
 'some_num': '3'}</code></pre>
</div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L628" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="config-1" class="level3">
<h3 class="anchored" data-anchor-id="config-1">Config</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb235"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb235-1"><a href="#cb235-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb235-2"><a href="#cb235-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> Config(</span>
<span id="cb235-3"><a href="#cb235-3" aria-hidden="true" tabindex="-1"></a>    cfg_path, cfg_name, create:NoneType<span class="op">=</span><span class="va">None</span>, save:<span class="bu">bool</span><span class="op">=</span><span class="va">True</span>, extra_files:NoneType<span class="op">=</span><span class="va">None</span>, types:NoneType<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb235-4"><a href="#cb235-4" aria-hidden="true" tabindex="-1"></a>    cfg_kwargs:VAR_KEYWORD</span>
<span id="cb235-5"><a href="#cb235-5" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb235-6"><a href="#cb235-6" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Reading and writing <code>ConfigParser</code> ini files</em></p>
<p><a href="https://fastcore.fast.ai/foundation.html#config"><code>Config</code></a> is a convenient wrapper around <code>ConfigParser</code> ini files with a single section (<code>DEFAULT</code>).</p>
<p>Instantiate a <a href="https://fastcore.fast.ai/foundation.html#config"><code>Config</code></a> from an ini file at <code>cfg_path/cfg_name</code>:</p>
<div id="219b1aec" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb236"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb236-1"><a href="#cb236-1" aria-hidden="true" tabindex="-1"></a>save_config_file(<span class="st">'../tmp.ini'</span>, _d)</span>
<span id="cb236-2"><a href="#cb236-2" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>: cfg <span class="op">=</span> Config(<span class="st">'..'</span>, <span class="st">'tmp.ini'</span>)</span>
<span id="cb236-3"><a href="#cb236-3" aria-hidden="true" tabindex="-1"></a><span class="cf">finally</span>: os.unlink(<span class="st">'../tmp.ini'</span>)</span>
<span id="cb236-4"><a href="#cb236-4" aria-hidden="true" tabindex="-1"></a>cfg</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>{'user': 'fastai', 'lib_name': 'fastcore', 'some_path': 'test', 'some_bool': 'True', 'some_num': '3'}</code></pre>
</div>
</div>
<p>You can create a new file if one doesn’t exist by providing a <a href="https://fastcore.fast.ai/tools.html#create"><code>create</code></a> dict:</p>
<div id="d99a56cd" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb238"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb238-1"><a href="#cb238-1" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>: cfg <span class="op">=</span> Config(<span class="st">'..'</span>, <span class="st">'tmp.ini'</span>, create<span class="op">=</span>_d)</span>
<span id="cb238-2"><a href="#cb238-2" aria-hidden="true" tabindex="-1"></a><span class="cf">finally</span>: os.unlink(<span class="st">'../tmp.ini'</span>)</span>
<span id="cb238-3"><a href="#cb238-3" aria-hidden="true" tabindex="-1"></a>cfg</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>{'user': 'fastai', 'lib_name': 'fastcore', 'some_path': 'test', 'some_bool': 'True', 'some_num': '3'}</code></pre>
</div>
</div>
<p>If you additionally pass <code>save=False</code>, the <a href="https://fastcore.fast.ai/foundation.html#config"><code>Config</code></a> will contain the items from <a href="https://fastcore.fast.ai/tools.html#create"><code>create</code></a> without writing a new file:</p>
<div id="1f7282b8" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb240"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb240-1"><a href="#cb240-1" aria-hidden="true" tabindex="-1"></a>cfg <span class="op">=</span> Config(<span class="st">'..'</span>, <span class="st">'tmp.ini'</span>, create<span class="op">=</span>_d, save<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb240-2"><a href="#cb240-2" aria-hidden="true" tabindex="-1"></a>test_eq(cfg.user,<span class="st">'fastai'</span>)</span>
<span id="cb240-3"><a href="#cb240-3" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="kw">not</span> Path(<span class="st">'../tmp.ini'</span>).exists()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>You can also pass in <code>ConfigParser</code> <code>kwargs</code> to change the behavior of how your configuration file will be parsed. For example, by default, inline comments are not handled by <a href="https://fastcore.fast.ai/foundation.html#config"><code>Config</code></a>. However, if you pass in the <code>inline_comment_prefixes</code> with whatever your comment symbol is, you’ll overwrite this behavior.</p>
<div id="f8bd60db" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb241"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb241-1"><a href="#cb241-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a complete example config file with comments</span></span>
<span id="cb241-2"><a href="#cb241-2" aria-hidden="true" tabindex="-1"></a>cfg_str <span class="op">=</span> <span class="st">"""</span><span class="op">\</span></span>
<span id="cb241-3"><a href="#cb241-3" aria-hidden="true" tabindex="-1"></a><span class="st">[DEFAULT]</span></span>
<span id="cb241-4"><a href="#cb241-4" aria-hidden="true" tabindex="-1"></a><span class="st">user = fastai # inline comment</span></span>
<span id="cb241-5"><a href="#cb241-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb241-6"><a href="#cb241-6" aria-hidden="true" tabindex="-1"></a><span class="st"># Library configuration</span></span>
<span id="cb241-7"><a href="#cb241-7" aria-hidden="true" tabindex="-1"></a><span class="st">lib_name = fastcore</span></span>
<span id="cb241-8"><a href="#cb241-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb241-9"><a href="#cb241-9" aria-hidden="true" tabindex="-1"></a><span class="st"># Paths</span></span>
<span id="cb241-10"><a href="#cb241-10" aria-hidden="true" tabindex="-1"></a><span class="st">some_path = test </span></span>
<span id="cb241-11"><a href="#cb241-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb241-12"><a href="#cb241-12" aria-hidden="true" tabindex="-1"></a><span class="st"># Feature flags</span></span>
<span id="cb241-13"><a href="#cb241-13" aria-hidden="true" tabindex="-1"></a><span class="st">some_bool = True</span></span>
<span id="cb241-14"><a href="#cb241-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb241-15"><a href="#cb241-15" aria-hidden="true" tabindex="-1"></a><span class="st"># Numeric settings</span></span>
<span id="cb241-16"><a href="#cb241-16" aria-hidden="true" tabindex="-1"></a><span class="st">some_num = # missing value</span></span>
<span id="cb241-17"><a href="#cb241-17" aria-hidden="true" tabindex="-1"></a><span class="st">"""</span></span>
<span id="cb241-18"><a href="#cb241-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb241-19"><a href="#cb241-19" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">'../tmp.ini'</span>, <span class="st">'w'</span>) <span class="im">as</span> f:</span>
<span id="cb241-20"><a href="#cb241-20" aria-hidden="true" tabindex="-1"></a>    f.write(cfg_str)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="5143b482" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb242"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb242-1"><a href="#cb242-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Now read it back to verify</span></span>
<span id="cb242-2"><a href="#cb242-2" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>: cfg <span class="op">=</span> Config(<span class="st">'..'</span>, <span class="st">'tmp.ini'</span>, inline_comment_prefixes<span class="op">=</span>(<span class="st">'#'</span>))</span>
<span id="cb242-3"><a href="#cb242-3" aria-hidden="true" tabindex="-1"></a><span class="cf">finally</span>: os.unlink(<span class="st">'../tmp.ini'</span>)</span>
<span id="cb242-4"><a href="#cb242-4" aria-hidden="true" tabindex="-1"></a>test_eq(cfg.user,<span class="st">'fastai'</span>)</span>
<span id="cb242-5"><a href="#cb242-5" aria-hidden="true" tabindex="-1"></a>test_eq(cfg.some_num,<span class="st">''</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L650" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="config.get" class="level3">
<h3 class="anchored" data-anchor-id="config.get">Config.get</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb243"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb243-1"><a href="#cb243-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb243-2"><a href="#cb243-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get(</span>
<span id="cb243-3"><a href="#cb243-3" aria-hidden="true" tabindex="-1"></a>    k, default:NoneType<span class="op">=</span><span class="va">None</span></span>
<span id="cb243-4"><a href="#cb243-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb243-5"><a href="#cb243-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Keys can be accessed as attributes, items, or with <code>get</code> and an optional default:</p>
<div id="1f30f8eb" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb244"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb244-1"><a href="#cb244-1" aria-hidden="true" tabindex="-1"></a>test_eq(cfg.user,<span class="st">'fastai'</span>)</span>
<span id="cb244-2"><a href="#cb244-2" aria-hidden="true" tabindex="-1"></a>test_eq(cfg[<span class="st">'some_path'</span>], <span class="st">'test'</span>)</span>
<span id="cb244-3"><a href="#cb244-3" aria-hidden="true" tabindex="-1"></a>test_eq(cfg.get(<span class="st">'foo'</span>,<span class="st">'bar'</span>),<span class="st">'bar'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Extra files can be read <em>before</em> <code>cfg_path/cfg_name</code> using <code>extra_files</code>, in the order they appear:</p>
<div id="6c124f0f" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb245"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb245-1"><a href="#cb245-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> tempfile.TemporaryDirectory() <span class="im">as</span> d:</span>
<span id="cb245-2"><a href="#cb245-2" aria-hidden="true" tabindex="-1"></a>    a <span class="op">=</span> Config(d, <span class="st">'a.ini'</span>, {<span class="st">'a'</span>:<span class="dv">0</span>,<span class="st">'b'</span>:<span class="dv">0</span>})</span>
<span id="cb245-3"><a href="#cb245-3" aria-hidden="true" tabindex="-1"></a>    b <span class="op">=</span> Config(d, <span class="st">'b.ini'</span>, {<span class="st">'a'</span>:<span class="dv">1</span>,<span class="st">'c'</span>:<span class="dv">0</span>})</span>
<span id="cb245-4"><a href="#cb245-4" aria-hidden="true" tabindex="-1"></a>    c <span class="op">=</span> Config(d, <span class="st">'c.ini'</span>, {<span class="st">'a'</span>:<span class="dv">2</span>,<span class="st">'d'</span>:<span class="dv">0</span>}, extra_files<span class="op">=</span>[a.config_file,b.config_file])</span>
<span id="cb245-5"><a href="#cb245-5" aria-hidden="true" tabindex="-1"></a>    test_eq(c.d, {<span class="st">'a'</span>:<span class="st">'2'</span>,<span class="st">'b'</span>:<span class="st">'0'</span>,<span class="st">'c'</span>:<span class="st">'0'</span>,<span class="st">'d'</span>:<span class="st">'0'</span>})</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>If you pass a dict <code>types</code>, then the values of that dict will be used as types to instantiate all values returned. <code>Path</code> is a special case – in that case, the path returned will be relative to the path containing the config file (assuming the value is relative). <code>bool</code> types use <a href="https://fastcore.fast.ai/basics.html#str2bool"><code>str2bool</code></a> to convert to boolean.</p>
<div id="c3ab1e1d" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb246"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb246-1"><a href="#cb246-1" aria-hidden="true" tabindex="-1"></a>_types <span class="op">=</span> <span class="bu">dict</span>(some_path<span class="op">=</span>Path, some_bool<span class="op">=</span><span class="bu">bool</span>, some_num<span class="op">=</span><span class="bu">int</span>)</span>
<span id="cb246-2"><a href="#cb246-2" aria-hidden="true" tabindex="-1"></a>cfg <span class="op">=</span> Config(<span class="st">'..'</span>, <span class="st">'tmp.ini'</span>, create<span class="op">=</span>_d, save<span class="op">=</span><span class="va">False</span>, types<span class="op">=</span>_types)</span>
<span id="cb246-3"><a href="#cb246-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb246-4"><a href="#cb246-4" aria-hidden="true" tabindex="-1"></a>test_eq(cfg.user,<span class="st">'fastai'</span>)</span>
<span id="cb246-5"><a href="#cb246-5" aria-hidden="true" tabindex="-1"></a>test_eq(cfg[<span class="st">'some_path'</span>].resolve(), (Path(<span class="st">'..'</span>)<span class="op">/</span><span class="st">'test'</span>).resolve())</span>
<span id="cb246-6"><a href="#cb246-6" aria-hidden="true" tabindex="-1"></a>test_eq(cfg.get(<span class="st">'some_num'</span>), <span class="dv">3</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/foundation.py#L664" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="config.find" class="level3">
<h3 class="anchored" data-anchor-id="config.find">Config.find</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb247"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb247-1"><a href="#cb247-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb247-2"><a href="#cb247-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> find(</span>
<span id="cb247-3"><a href="#cb247-3" aria-hidden="true" tabindex="-1"></a>    cfg_name, cfg_path:NoneType<span class="op">=</span><span class="va">None</span>, kwargs:VAR_KEYWORD</span>
<span id="cb247-4"><a href="#cb247-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb247-5"><a href="#cb247-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Search <code>cfg_path</code> and its parents to find <code>cfg_name</code></em></p>
<p>You can use <a href="https://fastcore.fast.ai/foundation.html#config.find"><code>Config.find</code></a> to search subdirectories for a config file, starting in the current path if no path is specified:</p>
<div id="5f858954" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb248"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb248-1"><a href="#cb248-1" aria-hidden="true" tabindex="-1"></a>Config.find(<span class="st">'settings.ini'</span>).repo</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>'fastcore'</code></pre>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/fastcore\.fast\.ai\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/AnswerDotAI/fastcore/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>